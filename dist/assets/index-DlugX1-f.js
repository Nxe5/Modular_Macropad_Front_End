(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const Vr=!1;var er=Array.isArray,no=Array.prototype.indexOf,zr=Array.from,oo=Object.defineProperty,Qe=Object.getOwnPropertyDescriptor,sn=Object.getOwnPropertyDescriptors,ao=Object.prototype,so=Array.prototype,Tr=Object.getPrototypeOf;function zt(e){return typeof e=="function"}const Kt=()=>{};function io(e){return e()}function mr(e){for(var t=0;t<e.length;t++)e[t]()}const We=2,ln=4,tr=8,Pr=16,et=32,Bt=64,Yt=128,qe=256,Jt=512,Ce=1024,tt=2048,_t=4096,Ge=8192,rr=16384,lo=32768,Lt=65536,cn=1<<17,co=1<<19,un=1<<20,Ze=Symbol("$state"),dn=Symbol("legacy props"),uo=Symbol("");function vn(e){return e===this.v}function fn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Nr(e){return!fn(e,this.v)}function vo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function po(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _o(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function go(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function mo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ho(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function yo(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function bo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let St=!1,wo=!1;function xo(){St=!0}const Rr=1,Dr=2,pn=4,ko=8,$o=16,So=1,Eo=2,_n=4,Co=8,Mo=16,Ao=1,zo=2,Pe=Symbol(),gn="http://www.w3.org/2000/svg";function mn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ie=null;function Ur(e){ie=e}function Ne(e,t=!1,r){ie={p:ie,c:null,e:null,m:!1,s:e,x:null,l:null},St&&!t&&(ie.l={s:null,u:null,r1:[],r2:Me(!1)})}function Re(e){const t=ie;if(t!==null){e!==void 0&&(t.x=e);const i=t.e;if(i!==null){var r=ne,o=ae;t.e=null;try{for(var n=0;n<i.length;n++){var a=i[n];ut(a.effect),ct(a.reaction),or(a.fn)}}finally{ut(r),ct(o)}}ie=t.p,t.m=!0}return e||{}}function Ot(){return!St||ie!==null&&ie.l===null}function Me(e,t){var r={f:0,v:e,reactions:null,equals:vn,rv:0,wv:0};return r}function hr(e){return hn(Me(e))}function Ir(e,t=!1){var o;const r=Me(e);return t||(r.equals=Nr),St&&ie!==null&&ie.l!==null&&((o=ie.l).s??(o.s=[])).push(r),r}function U(e,t=!1){return hn(Ir(e,t))}function hn(e){return ae!==null&&!Ue&&ae.f&We&&(Ke===null?Wo([e]):Ke.push(e)),e}function Ie(e,t){return m(e,He(()=>s(e))),t}function m(e,t){return ae!==null&&!Ue&&Ot()&&ae.f&(We|Pr)&&(Ke===null||!Ke.includes(e))&&bo(),Rt(e,t)}function Rt(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=Rn(),yn(e,tt),Ot()&&ne!==null&&ne.f&Ce&&!(ne.f&(et|Bt))&&(Ye===null?Fo([e]):Ye.push(e))),t}function Kr(e,t=1){var r=s(e),o=t===1?r++:r--;return m(e,r),o}function yn(e,t){var r=e.reactions;if(r!==null)for(var o=Ot(),n=r.length,a=0;a<n;a++){var i=r[a],l=i.f;l&tt||!o&&i===ne||(Ve(i,t),l&(Ce|qe)&&(l&We?yn(i,_t):lr(i)))}}let Br=!1;function Je(e,t=null,r){if(typeof e!="object"||e===null||Ze in e)return e;const o=Tr(e);if(o!==ao&&o!==so)return e;var n=new Map,a=er(e),i=Me(0);a&&n.set("length",Me(e.length));var l;return new Proxy(e,{defineProperty(d,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&mo();var g=n.get(u);return g===void 0?(g=Me(v.value),n.set(u,g)):m(g,Je(v.value,l)),!0},deleteProperty(d,u){var v=n.get(u);if(v===void 0)u in d&&n.set(u,Me(Pe));else{if(a&&typeof u=="string"){var g=n.get("length"),c=Number(u);Number.isInteger(c)&&c<g.v&&m(g,c)}m(v,Pe),Hr(i)}return!0},get(d,u,v){var _;if(u===Ze)return e;var g=n.get(u),c=u in d;if(g===void 0&&(!c||(_=Qe(d,u))!=null&&_.writable)&&(g=Me(Je(c?d[u]:Pe,l)),n.set(u,g)),g!==void 0){var y=s(g);return y===Pe?void 0:y}return Reflect.get(d,u,v)},getOwnPropertyDescriptor(d,u){var v=Reflect.getOwnPropertyDescriptor(d,u);if(v&&"value"in v){var g=n.get(u);g&&(v.value=s(g))}else if(v===void 0){var c=n.get(u),y=c==null?void 0:c.v;if(c!==void 0&&y!==Pe)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return v},has(d,u){var y;if(u===Ze)return!0;var v=n.get(u),g=v!==void 0&&v.v!==Pe||Reflect.has(d,u);if(v!==void 0||ne!==null&&(!g||(y=Qe(d,u))!=null&&y.writable)){v===void 0&&(v=Me(g?Je(d[u],l):Pe),n.set(u,v));var c=s(v);if(c===Pe)return!1}return g},set(d,u,v,g){var b;var c=n.get(u),y=u in d;if(a&&u==="length")for(var _=v;_<c.v;_+=1){var k=n.get(_+"");k!==void 0?m(k,Pe):_ in d&&(k=Me(Pe),n.set(_+"",k))}c===void 0?(!y||(b=Qe(d,u))!=null&&b.writable)&&(c=Me(void 0),m(c,Je(v,l)),n.set(u,c)):(y=c.v!==Pe,m(c,Je(v,l)));var C=Reflect.getOwnPropertyDescriptor(d,u);if(C!=null&&C.set&&C.set.call(g,v),!y){if(a&&typeof u=="string"){var N=n.get("length"),z=Number(u);Number.isInteger(z)&&z>=N.v&&m(N,z+1)}Hr(i)}return!0},ownKeys(d){s(i);var u=Reflect.ownKeys(d).filter(c=>{var y=n.get(c);return y===void 0||y.v!==Pe});for(var[v,g]of n)g.v!==Pe&&!(v in d)&&u.push(v);return u},setPrototypeOf(){ho()}})}function Hr(e,t=1){m(e,e.v+t)}function Yr(e){return e!==null&&typeof e=="object"&&Ze in e?e[Ze]:e}function To(e,t){return Object.is(Yr(e),Yr(t))}var Jr,bn,wn,xn;function Po(){if(Jr===void 0){Jr=window,bn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;wn=Qe(t,"firstChild").get,xn=Qe(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function qt(e=""){return document.createTextNode(e)}function wt(e){return wn.call(e)}function nr(e){return xn.call(e)}function f(e,t){return wt(e)}function O(e,t){{var r=wt(e);return r instanceof Comment&&r.data===""?nr(r):r}}function h(e,t=1,r=!1){let o=e;for(;t--;)o=nr(o);return o}function No(e){e.textContent=""}function xt(e){var t=We|tt,r=ae!==null&&ae.f&We?ae:null;return ne===null||r!==null&&r.f&qe?t|=qe:ne.f|=un,{ctx:ie,deps:null,effects:null,equals:vn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??ne}}function Be(e){const t=xt(e);return t.equals=Nr,t}function kn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Xe(t[r])}}function Ro(e){for(var t=e.parent;t!==null;){if(!(t.f&We))return t;t=t.parent}return null}function Do(e){var t,r=ne;ut(Ro(e));try{kn(e),t=In(e)}finally{ut(r)}return t}function $n(e){var t=Do(e),r=(lt||e.f&qe)&&e.deps!==null?_t:Ce;Ve(e,r),e.equals(t)||(e.v=t,e.wv=Rn())}function Sn(e){ne===null&&ae===null&&po(),ae!==null&&ae.f&qe&&ne===null&&fo(),qr&&vo()}function Io(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Et(e,t,r,o=!0){var n=(e&Bt)!==0,a=ne,i={ctx:ie,deps:null,nodes_start:null,nodes_end:null,f:e|tt,first:null,fn:t,last:null,next:null,parent:n?null:a,prev:null,teardown:null,transitions:null,wv:0};if(r){var l=bt;try{Qr(!0),ir(i),i.f|=lo}catch(v){throw Xe(i),v}finally{Qr(l)}}else t!==null&&lr(i);var d=r&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(un|Yt))===0;if(!d&&!n&&o&&(a!==null&&Io(i,a),ae!==null&&ae.f&We)){var u=ae;(u.effects??(u.effects=[])).push(i)}return i}function En(e){const t=Et(tr,null,!1);return Ve(t,Ce),t.teardown=e,t}function yr(e){Sn();var t=ne!==null&&(ne.f&et)!==0&&ie!==null&&!ie.m;if(t){var r=ie;(r.e??(r.e=[])).push({fn:e,effect:ne,reaction:ae})}else{var o=or(e);return o}}function Bo(e){return Sn(),ar(e)}function Lo(e){const t=Et(Bt,e,!0);return(r={})=>new Promise(o=>{r.outro?kt(t,()=>{Xe(t),o(void 0)}):(Xe(t),o(void 0))})}function or(e){return Et(ln,e,!1)}function br(e,t){var r=ie,o={effect:null,ran:!1};r.l.r1.push(o),o.effect=ar(()=>{e(),!o.ran&&(o.ran=!0,m(r.l.r2,!0),He(t))})}function Cn(){var e=ie;ar(()=>{if(s(e.l.r2)){for(var t of e.l.r1){var r=t.effect;r.f&Ce&&Ve(r,_t),Ct(r)&&ir(r),t.ran=!1}e.l.r2.v=!1}})}function ar(e){return Et(tr,e,!0)}function F(e,t=[],r=xt){const o=t.map(r);return Wt(()=>e(...o.map(s)))}function Wt(e,t=0){return Et(tr|Pr|t,e,!0)}function pt(e,t=!0){return Et(tr|et,e,!0,t)}function Mn(e){var t=e.teardown;if(t!==null){const r=qr,o=ae;Gr(!0),ct(null);try{t.call(null)}finally{Gr(r),ct(o)}}}function An(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var o=r.next;Xe(r,t),r=o}}function Oo(e){for(var t=e.first;t!==null;){var r=t.next;t.f&et||Xe(t),t=r}}function Xe(e,t=!0){var r=!1;if((t||e.f&co)&&e.nodes_start!==null){for(var o=e.nodes_start,n=e.nodes_end;o!==null;){var a=o===n?null:nr(o);o.remove(),o=a}r=!0}An(e,t&&!r),Xt(e,0),Ve(e,rr);var i=e.transitions;if(i!==null)for(const d of i)d.stop();Mn(e);var l=e.parent;l!==null&&l.first!==null&&zn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function zn(e){var t=e.parent,r=e.prev,o=e.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),t!==null&&(t.first===e&&(t.first=o),t.last===e&&(t.last=r))}function kt(e,t){var r=[];Lr(e,r,!0),Tn(r,()=>{Xe(e),t&&t()})}function Tn(e,t){var r=e.length;if(r>0){var o=()=>--r||t();for(var n of e)n.out(o)}else t()}function Lr(e,t,r){if(!(e.f&Ge)){if(e.f^=Ge,e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&t.push(i);for(var o=e.first;o!==null;){var n=o.next,a=(o.f&Lt)!==0||(o.f&et)!==0;Lr(o,t,a?r:!1),o=n}}}function Dt(e){Pn(e,!0)}function Pn(e,t){if(e.f&Ge){e.f^=Ge,e.f&Ce||(e.f^=Ce),Ct(e)&&(Ve(e,tt),lr(e));for(var r=e.first;r!==null;){var o=r.next,n=(r.f&Lt)!==0||(r.f&et)!==0;Pn(r,n?t:!1),r=o}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let wr=!1,xr=[];function qo(){wr=!1;const e=xr.slice();xr=[],mr(e)}function Or(e){wr||(wr=!0,queueMicrotask(qo)),xr.push(e)}let Ht=!1,Qt=!1,Gt=null,bt=!1,qr=!1;function Qr(e){bt=e}function Gr(e){qr=e}let kr=[],Pt=0;let ae=null,Ue=!1;function ct(e){ae=e}let ne=null;function ut(e){ne=e}let Ke=null;function Wo(e){Ke=e}let Ae=null,De=0,Ye=null;function Fo(e){Ye=e}let Nn=1,Zt=0,lt=!1,at=null;function Rn(){return++Nn}function Ct(e){var g;var t=e.f;if(t&tt)return!0;if(t&_t){var r=e.deps,o=(t&qe)!==0;if(r!==null){var n,a,i=(t&Jt)!==0,l=o&&ne!==null&&!lt,d=r.length;if(i||l){var u=e,v=u.parent;for(n=0;n<d;n++)a=r[n],(i||!((g=a==null?void 0:a.reactions)!=null&&g.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);i&&(u.f^=Jt),l&&v!==null&&!(v.f&qe)&&(u.f^=qe)}for(n=0;n<d;n++)if(a=r[n],Ct(a)&&$n(a),a.wv>e.wv)return!0}(!o||ne!==null&&!lt)&&Ve(e,Ce)}return!1}function jo(e,t){for(var r=t;r!==null;){if(r.f&Yt)try{r.fn(e);return}catch{r.f^=Yt}r=r.parent}throw Ht=!1,e}function Vo(e){return(e.f&rr)===0&&(e.parent===null||(e.parent.f&Yt)===0)}function sr(e,t,r,o){if(Ht){if(r===null&&(Ht=!1),Vo(t))throw e;return}r!==null&&(Ht=!0);{jo(e,t);return}}function Dn(e,t,r=!0){var o=e.reactions;if(o!==null)for(var n=0;n<o.length;n++){var a=o[n];a.f&We?Dn(a,t,!1):t===a&&(r?Ve(a,tt):a.f&Ce&&Ve(a,_t),lr(a))}}function In(e){var y;var t=Ae,r=De,o=Ye,n=ae,a=lt,i=Ke,l=ie,d=Ue,u=e.f;Ae=null,De=0,Ye=null,ae=u&(et|Bt)?null:e,lt=(u&qe)!==0&&(!bt||n===null||d),Ke=null,Ur(e.ctx),Ue=!1,Zt++;try{var v=(0,e.fn)(),g=e.deps;if(Ae!==null){var c;if(Xt(e,De),g!==null&&De>0)for(g.length=De+Ae.length,c=0;c<Ae.length;c++)g[De+c]=Ae[c];else e.deps=g=Ae;if(!lt)for(c=De;c<g.length;c++)((y=g[c]).reactions??(y.reactions=[])).push(e)}else g!==null&&De<g.length&&(Xt(e,De),g.length=De);if(Ot()&&Ye!==null&&!Ue&&g!==null&&!(e.f&(We|_t|tt)))for(c=0;c<Ye.length;c++)Dn(Ye[c],e);return n!==null&&Zt++,v}finally{Ae=t,De=r,Ye=o,ae=n,lt=a,Ke=i,Ur(l),Ue=d}}function Uo(e,t){let r=t.reactions;if(r!==null){var o=no.call(r,e);if(o!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[o]=r[n],r.pop())}}r===null&&t.f&We&&(Ae===null||!Ae.includes(t))&&(Ve(t,_t),t.f&(qe|Jt)||(t.f^=Jt),kn(t),Xt(t,0))}function Xt(e,t){var r=e.deps;if(r!==null)for(var o=t;o<r.length;o++)Uo(e,r[o])}function ir(e){var t=e.f;if(!(t&rr)){Ve(e,Ce);var r=ne,o=ie;ne=e;try{t&Pr?Oo(e):An(e),Mn(e);var n=In(e);e.teardown=typeof n=="function"?n:null,e.wv=Nn;var a=e.deps,i;Vr&&wo&&e.f&tt}catch(l){sr(l,e,r,o||e.ctx)}finally{ne=r}}}function Ko(){if(Pt>1e3){Pt=0;try{_o()}catch(e){if(Gt!==null)sr(e,Gt,null);else throw e}}Pt++}function Ho(e){var t=e.length;if(t!==0){Ko();var r=bt;bt=!0;try{for(var o=0;o<t;o++){var n=e[o];n.f&Ce||(n.f^=Ce);var a=Qo(n);Yo(a)}}finally{bt=r}}}function Yo(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var o=e[r];if(!(o.f&(rr|Ge)))try{Ct(o)&&(ir(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null?zn(o):o.fn=null))}catch(n){sr(n,o,null,o.ctx)}}}function Jo(){if(Qt=!1,Pt>1001)return;const e=kr;kr=[],Ho(e),Qt||(Pt=0,Gt=null)}function lr(e){Qt||(Qt=!0,queueMicrotask(Jo)),Gt=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(Bt|et)){if(!(r&Ce))return;t.f^=Ce}}kr.push(t)}function Qo(e){var t=[],r=e.first;e:for(;r!==null;){var o=r.f,n=(o&et)!==0,a=n&&(o&Ce)!==0,i=r.next;if(!a&&!(o&Ge)){if(o&ln)t.push(r);else if(n)r.f^=Ce;else{var l=ae;try{ae=r,Ct(r)&&ir(r)}catch(v){sr(v,r,null,r.ctx)}finally{ae=l}}var d=r.first;if(d!==null){r=d;continue}}if(i===null){let v=r.parent;for(;v!==null;){if(e===v)break e;var u=v.next;if(u!==null){r=u;continue e}v=v.parent}}r=i}return t}function s(e){var t=e.f,r=(t&We)!==0;if(at!==null&&at.add(e),ae!==null&&!Ue){Ke!==null&&Ke.includes(e)&&yo();var o=ae.deps;e.rv<Zt&&(e.rv=Zt,Ae===null&&o!==null&&o[De]===e?De++:Ae===null?Ae=[e]:(!lt||!Ae.includes(e))&&Ae.push(e))}else if(r&&e.deps===null&&e.effects===null){var n=e,a=n.parent;a!==null&&!(a.f&qe)&&(n.f^=qe)}return r&&(n=e,Ct(n)&&$n(n)),e.v}function Go(e){var t=at;at=new Set;var r=at,o;try{if(He(e),t!==null)for(o of at)t.add(o)}finally{at=t}return r}function Zo(e){var t=Go(()=>He(e));for(var r of t)if(r.f&cn)for(const o of r.deps||[])o.f&We||Rt(o,o.v);else Rt(r,r.v)}function He(e){var t=Ue;try{return Ue=!0,e()}finally{Ue=t}}const Xo=-7169;function Ve(e,t){e.f=e.f&Xo|t}function Bn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ze in e)$r(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ze in r&&$r(r)}}}function $r(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let o in e)try{$r(e[o],t)}catch{}const r=Tr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=sn(r);for(let n in o){const a=o[n].get;if(a)try{a.call(e)}catch{}}}}}function ea(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const ta=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ra(e){return ta.includes(e)}const na={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function oa(e){return e=e.toLowerCase(),na[e]??e}const aa=["touchstart","touchmove"];function sa(e){return aa.includes(e)}function ia(e,t){if(t){const r=document.body;e.autofocus=!0,Or(()=>{document.activeElement===r&&e.focus()})}}let Zr=!1;function la(){Zr||(Zr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Ln(e){var t=ae,r=ne;ct(null),ut(null);try{return e()}finally{ct(t),ut(r)}}function On(e,t,r,o=r){e.addEventListener(t,()=>Ln(r));const n=e.__on_r;n?e.__on_r=()=>{n(),o(!0)}:e.__on_r=()=>o(!0),la()}const qn=new Set,Sr=new Set;function Wn(e,t,r,o={}){function n(a){if(o.capture||Tt.call(t,a),!a.cancelBubble)return Ln(()=>r==null?void 0:r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Or(()=>{t.addEventListener(e,n,o)}):t.addEventListener(e,n,o),n}function W(e,t,r,o,n){var a={capture:o,passive:n},i=Wn(e,t,r,a);(t===document.body||t===window||t===document)&&En(()=>{t.removeEventListener(e,i,a)})}function ca(e){for(var t=0;t<e.length;t++)qn.add(e[t]);for(var r of Sr)r(e)}function Tt(e){var z;var t=this,r=t.ownerDocument,o=e.type,n=((z=e.composedPath)==null?void 0:z.call(e))||[],a=n[0]||e.target,i=0,l=e.__root;if(l){var d=n.indexOf(l);if(d!==-1&&(t===document||t===window)){e.__root=t;return}var u=n.indexOf(t);if(u===-1)return;d<=u&&(i=d)}if(a=n[i]||e.target,a!==t){oo(e,"currentTarget",{configurable:!0,get(){return a||r}});var v=ae,g=ne;ct(null),ut(null);try{for(var c,y=[];a!==null;){var _=a.assignedSlot||a.parentNode||a.host||null;try{var k=a["__"+o];if(k!==void 0&&(!a.disabled||e.target===a))if(er(k)){var[C,...N]=k;C.apply(a,[e,...N])}else k.call(a,e)}catch(b){c?y.push(b):c=b}if(e.cancelBubble||_===t||_===null)break;a=_}if(c){for(let b of y)queueMicrotask(()=>{throw b});throw c}}finally{e.__root=t,delete e.currentTarget,ct(v),ut(g)}}}function Fn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function $t(e,t){var r=ne;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function S(e,t){var r=(t&Ao)!==0,o=(t&zo)!==0,n,a=!e.startsWith("<!>");return()=>{n===void 0&&(n=Fn(a?e:"<!>"+e),r||(n=wt(n)));var i=o||bn?document.importNode(n,!0):n.cloneNode(!0);if(r){var l=wt(i),d=i.lastChild;$t(l,d)}else $t(i,i);return i}}function ua(e,t,r="svg"){var o=!e.startsWith("<!>"),n=`<${r}>${o?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var i=Fn(n),l=wt(i);a=wt(l)}var d=a.cloneNode(!0);return $t(d,d),d}}function da(e=""){{var t=qt(e+"");return $t(t,t),t}}function j(){var e=document.createDocumentFragment(),t=document.createComment(""),r=qt();return e.append(t,r),$t(t,r),e}function p(e,t){e!==null&&e.before(t)}function K(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function va(e,t){return fa(e,t)}const mt=new Map;function fa(e,{target:t,anchor:r,props:o={},events:n,context:a,intro:i=!0}){Po();var l=new Set,d=g=>{for(var c=0;c<g.length;c++){var y=g[c];if(!l.has(y)){l.add(y);var _=sa(y);t.addEventListener(y,Tt,{passive:_});var k=mt.get(y);k===void 0?(document.addEventListener(y,Tt,{passive:_}),mt.set(y,1)):mt.set(y,k+1)}}};d(zr(qn)),Sr.add(d);var u=void 0,v=Lo(()=>{var g=r??t.appendChild(qt());return pt(()=>{if(a){Ne({});var c=ie;c.c=a}n&&(o.$$events=n),u=e(g,o)||{},a&&Re()}),()=>{var _;for(var c of l){t.removeEventListener(c,Tt);var y=mt.get(c);--y===0?(document.removeEventListener(c,Tt),mt.delete(c)):mt.set(c,y)}Sr.delete(d),g!==r&&((_=g.parentNode)==null||_.removeChild(g))}});return pa.set(u,v),u}let pa=new WeakMap;function L(e,t,r=!1){var o=e,n=null,a=null,i=Pe,l=r?Lt:0,d=!1;const u=(g,c=!0)=>{d=!0,v(c,g)},v=(g,c)=>{i!==(i=g)&&(i?(n?Dt(n):c&&(n=pt(()=>c(o))),a&&kt(a,()=>{a=null})):(a?Dt(a):c&&(a=pt(()=>c(o))),n&&kt(n,()=>{n=null})))};Wt(()=>{d=!1,t(u),d||v(null,null)},l)}function ke(e,t){return t}function _a(e,t,r,o){for(var n=[],a=t.length,i=0;i<a;i++)Lr(t[i].e,n,!0);var l=a>0&&n.length===0&&r!==null;if(l){var d=r.parentNode;No(d),d.append(r),o.clear(),ot(e,t[0].prev,t[a-1].next)}Tn(n,()=>{for(var u=0;u<a;u++){var v=t[u];l||(o.delete(v.k),ot(e,v.prev,v.next)),Xe(v.e,!l)}})}function $e(e,t,r,o,n,a=null){var i=e,l={flags:t,items:new Map,first:null},d=(t&pn)!==0;if(d){var u=e;i=u.appendChild(qt())}var v=null,g=!1,c=Be(()=>{var y=r();return er(y)?y:y==null?[]:zr(y)});Wt(()=>{var y=s(c),_=y.length;g&&_===0||(g=_===0,ga(y,l,i,n,t,o,r),a!==null&&(_===0?v?Dt(v):v=pt(()=>a(i)):v!==null&&kt(v,()=>{v=null})),s(c))})}function ga(e,t,r,o,n,a,i){var J,Y,B,Q;var l=(n&ko)!==0,d=(n&(Rr|Dr))!==0,u=e.length,v=t.items,g=t.first,c=g,y,_=null,k,C=[],N=[],z,b,$,x;if(l)for(x=0;x<u;x+=1)z=e[x],b=a(z,x),$=v.get(b),$!==void 0&&((J=$.a)==null||J.measure(),(k??(k=new Set)).add($));for(x=0;x<u;x+=1){if(z=e[x],b=a(z,x),$=v.get(b),$===void 0){var T=c?c.e.nodes_start:r;_=ha(T,t,_,_===null?t.first:_.next,z,b,x,o,n,i),v.set(b,_),C=[],N=[],c=_.next;continue}if(d&&ma($,z,x,n),$.e.f&Ge&&(Dt($.e),l&&((Y=$.a)==null||Y.unfix(),(k??(k=new Set)).delete($))),$!==c){if(y!==void 0&&y.has($)){if(C.length<N.length){var V=N[0],R;_=V.prev;var A=C[0],M=C[C.length-1];for(R=0;R<C.length;R+=1)Xr(C[R],V,r);for(R=0;R<N.length;R+=1)y.delete(N[R]);ot(t,A.prev,M.next),ot(t,_,A),ot(t,M,V),c=V,_=M,x-=1,C=[],N=[]}else y.delete($),Xr($,c,r),ot(t,$.prev,$.next),ot(t,$,_===null?t.first:_.next),ot(t,_,$),_=$;continue}for(C=[],N=[];c!==null&&c.k!==b;)c.e.f&Ge||(y??(y=new Set)).add(c),N.push(c),c=c.next;if(c===null)continue;$=c}C.push($),_=$,c=$.next}if(c!==null||y!==void 0){for(var I=y===void 0?[]:zr(y);c!==null;)c.e.f&Ge||I.push(c),c=c.next;var E=I.length;if(E>0){var q=n&pn&&u===0?r:null;if(l){for(x=0;x<E;x+=1)(B=I[x].a)==null||B.measure();for(x=0;x<E;x+=1)(Q=I[x].a)==null||Q.fix()}_a(t,I,q,v)}}l&&Or(()=>{var se;if(k!==void 0)for($ of k)(se=$.a)==null||se.apply()}),ne.first=t.first&&t.first.e,ne.last=_&&_.e}function ma(e,t,r,o){o&Rr&&Rt(e.v,t),o&Dr?Rt(e.i,r):e.i=r}function ha(e,t,r,o,n,a,i,l,d,u){var v=(d&Rr)!==0,g=(d&$o)===0,c=v?g?Ir(n):Me(n):n,y=d&Dr?Me(i):i,_={i:y,v:c,k:a,a:null,e:null,prev:r,next:o};try{return _.e=pt(()=>l(e,c,y,u),Br),_.e.prev=r&&r.e,_.e.next=o&&o.e,r===null?t.first=_:(r.next=_,r.e.next=_.e),o!==null&&(o.prev=_,o.e.prev=_.e),_}finally{}}function Xr(e,t,r){for(var o=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==o;){var i=nr(a);n.before(a),a=i}}function ot(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function he(e,t,r,o,n){var l;var a=(l=t.$$slots)==null?void 0:l[r],i=!1;a===!0&&(a=t.children,i=!0),a===void 0||a(e,i?()=>o:o)}function jn(e,t,r){var o=e,n,a;Wt(()=>{n!==(n=t())&&(a&&(kt(a),a=null),n&&(a=pt(()=>r(o,n))))},Lt)}function ya(e,t,r,o,n,a){var i,l,d=null,u=e,v;Wt(()=>{const g=t()||null;var c=gn;g!==i&&(v&&(g===null?kt(v,()=>{v=null,l=null}):g===l?Dt(v):Xe(v)),g&&g!==l&&(v=pt(()=>{if(d=document.createElementNS(c,g),$t(d,d),o){var y=d.appendChild(qt());o(d,y)}ne.nodes_end=d,u.before(d)})),i=g,i&&(l=i))},Lt)}function Vn(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Vn(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ba(){for(var e,t,r=0,o="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Vn(e))&&(o&&(o+=" "),o+=t);return o}function Er(e){return typeof e=="object"?ba(e):e??""}function en(e,t){var r=e.__attributes??(e.__attributes={});r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function wa(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function st(e,t,r,o){var n=e.__attributes??(e.__attributes={});n[t]!==(n[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[uo]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Un(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function tn(e,t,r,o,n=!1,a=!1,i=!1){var l=t||{},d=e.tagName==="OPTION";for(var u in t)u in r||(r[u]=null);r.class&&(r.class=Er(r.class));var v=Un(e),g=e.__attributes??(e.__attributes={});for(const z in r){let b=r[z];if(d&&z==="value"&&b==null){e.value=e.__value="",l[z]=b;continue}var c=l[z];if(b!==c){l[z]=b;var y=z[0]+z[1];if(y!=="$$"){if(y==="on"){const $={},x="$$"+z;let T=z.slice(2);var _=ra(T);if(ea(T)&&(T=T.slice(0,-7),$.capture=!0),!_&&c){if(b!=null)continue;e.removeEventListener(T,l[x],$),l[x]=null}if(b!=null)if(_)e[`__${T}`]=b,ca([T]);else{let V=function(R){l[z].call(this,R)};var N=V;l[x]=Wn(T,e,V,$)}else _&&(e[`__${T}`]=void 0)}else if(z==="style"&&b!=null)e.style.cssText=b+"";else if(z==="autofocus")ia(e,!!b);else if(!a&&(z==="__value"||z==="value"&&b!=null))e.value=e.__value=b;else if(z==="selected"&&d)wa(e,b);else{var k=z;n||(k=oa(k));var C=k==="defaultValue"||k==="defaultChecked";if(b==null&&!a&&!C)if(g[z]=null,k==="value"||k==="checked"){let $=e;const x=t===void 0;if(k==="value"){let T=$.defaultValue;$.removeAttribute(k),$.defaultValue=T,$.value=$.__value=x?T:null}else{let T=$.defaultChecked;$.removeAttribute(k),$.defaultChecked=T,$.checked=x?T:!1}}else e.removeAttribute(z);else C||v.includes(k)&&(a||typeof b!="string")?e[k]=b:typeof b!="function"&&st(e,k,b)}z==="style"&&"__styles"in e&&(e.__styles={})}}}return l}var rn=new Map;function Un(e){var t=rn.get(e.nodeName);if(t)return t;rn.set(e.nodeName,t=[]);for(var r,o=e,n=Element.prototype;n!==o;){r=sn(o);for(var a in r)r[a].set&&t.push(a);o=Tr(o)}return t}function xa(e,t,r){var o=e.__className,n=Kn(t,r);(o!==n||Br)&&(n===""?e.removeAttribute("class"):e.setAttribute("class",n),e.__className=n)}function ze(e,t,r){var o=e.__className,n=Kn(t,r);(o!==n||Br)&&(t==null&&!r?e.removeAttribute("class"):e.className=n,e.__className=n)}function Kn(e,t){return(e??"")+(t?" "+t:"")}function fr(e,t,r){if(r){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function ft(e,t,r=t){var o=Ot();On(e,"input",n=>{var a=n?e.defaultValue:e.value;if(a=pr(e)?_r(a):a,r(a),o&&a!==(a=t())){var i=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(l,e.value.length))}}),He(t)==null&&e.value&&r(pr(e)?_r(e.value):e.value),ar(()=>{var n=t();pr(e)&&n===_r(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function pr(e){var t=e.type;return t==="number"||t==="range"}function _r(e){return e===""?null:+e}function nn(e,t,r){var o=Qe(e,t);o&&o.set&&(e[t]=r,En(()=>{e[t]=null}))}function Hn(e,t,r){if(e.multiple)return Sa(e,t);for(var o of e.options){var n=Nt(o);if(To(n,t)){o.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ka(e,t){or(()=>{var r=new MutationObserver(()=>{var o=e.__value;Hn(e,o)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function $a(e,t,r=t){var o=!0;On(e,"change",n=>{var a=n?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(a),Nt);else{var l=e.querySelector(a)??e.querySelector("option:not([disabled])");i=l&&Nt(l)}r(i)}),or(()=>{var n=t();if(Hn(e,n,o),o&&n===void 0){var a=e.querySelector(":checked");a!==null&&(n=Nt(a),r(n))}e.__value=n,o=!1}),ka(e)}function Sa(e,t){for(var r of e.options)r.selected=~t.indexOf(Nt(r))}function Nt(e){return"__value"in e?e.__value:e.value}function Fe(e=!1){const t=ie,r=t.l.u;if(!r)return;let o=()=>Bn(t.s);if(e){let n=0,a={};const i=xt(()=>{let l=!1;const d=t.s;for(const u in d)d[u]!==a[u]&&(a[u]=d[u],l=!0);return l&&n++,n});o=()=>s(i)}r.b.length&&Bo(()=>{on(t,o),mr(r.b)}),yr(()=>{const n=He(()=>r.m.map(io));return()=>{for(const a of n)typeof a=="function"&&a()}}),r.a.length&&yr(()=>{on(t,o),mr(r.a)})}function on(e,t){if(e.l.s)for(const r of e.l.s)s(r);t()}function Ea(e){var t=Me(0);return function(){return arguments.length===1?(m(t,s(t)+1),arguments[0]):(s(t),e())}}function Ca(e,t,r){if(e==null)return t(void 0),Kt;const o=He(()=>e.subscribe(t,r));return o.unsubscribe?()=>o.unsubscribe():o}const ht=[];function Wr(e,t=Kt){let r=null;const o=new Set;function n(l){if(fn(e,l)&&(e=l,r)){const d=!ht.length;for(const u of o)u[1](),ht.push(u,e);if(d){for(let u=0;u<ht.length;u+=2)ht[u][0](ht[u+1]);ht.length=0}}}function a(l){n(l(e))}function i(l,d=Kt){const u=[l,d];return o.add(u),o.size===1&&(r=t(n,a)||Kt),l(e),()=>{o.delete(u),o.size===0&&r&&(r(),r=null)}}return{set:n,update:a,subscribe:i}}function Yn(e){let t;return Ca(e,r=>t=r)(),t}let Ut=!1;function Ma(e){var t=Ut;try{return Ut=!1,[e(),Ut]}finally{Ut=t}}const Aa={get(e,t){if(!e.exclude.includes(t))return s(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=Ee({get[t](){return e.props[t]}},t,_n)),e.special[t](r),Kr(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Kr(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function me(e,t){return new Proxy({props:e,exclude:t,special:{},version:Me(0)},Aa)}const za={get(e,t){let r=e.props.length;for(;r--;){let o=e.props[r];if(zt(o)&&(o=o()),typeof o=="object"&&o!==null&&t in o)return o[t]}},set(e,t,r){let o=e.props.length;for(;o--;){let n=e.props[o];zt(n)&&(n=n());const a=Qe(n,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let o=e.props[r];if(zt(o)&&(o=o()),typeof o=="object"&&o!==null&&t in o){const n=Qe(o,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===Ze||t===dn)return!1;for(let r of e.props)if(zt(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){zt(r)&&(r=r());for(const o in r)t.includes(o)||t.push(o)}return t}};function be(...e){return new Proxy({props:e},za)}function Ee(e,t,r,o){var V;var n=(r&So)!==0,a=!St||(r&Eo)!==0,i=(r&Co)!==0,l=(r&Mo)!==0,d=!1,u;i?[u,d]=Ma(()=>e[t]):u=e[t];var v=Ze in e||dn in e,g=i&&(((V=Qe(e,t))==null?void 0:V.set)??(v&&t in e&&(R=>e[t]=R)))||void 0,c=o,y=!0,_=!1,k=()=>(_=!0,y&&(y=!1,l?c=He(o):c=o),c);u===void 0&&o!==void 0&&(g&&a&&go(),u=k(),g&&g(u));var C;if(a)C=()=>{var R=e[t];return R===void 0?k():(y=!0,_=!1,R)};else{var N=(n?xt:Be)(()=>e[t]);N.f|=cn,C=()=>{var R=s(N);return R!==void 0&&(c=void 0),R===void 0?c:R}}if(!(r&_n))return C;if(g){var z=e.$$legacy;return function(R,A){return arguments.length>0?((!a||!A||z||d)&&g(A?C():R),R):C()}}var b=!1,$=!1,x=Ir(u),T=xt(()=>{var R=C(),A=s(x);return b?(b=!1,$=!0,A):($=!1,x.v=R)});return n||(T.equals=Nr),function(R,A){if(at!==null&&(b=$,C(),s(x)),arguments.length>0){const M=A?s(T):a&&i?Je(R):R;return T.equals(M)||(b=!0,m(x,M),_&&c!==void 0&&(c=M),He(()=>s(T))),R}return s(T)}}function gt(e){ie===null&&mn(),St&&ie.l!==null?Pa(ie).m.push(e):yr(()=>{const t=He(e);if(typeof t=="function")return t})}function Ta(e,t,{bubbles:r=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:o})}function Jn(){const e=ie;return e===null&&mn(),(t,r,o)=>{var a;const n=(a=e.s.$$events)==null?void 0:a[t];if(n){const i=er(n)?n.slice():[n],l=Ta(t,r,o);for(const d of i)d.call(e.x,l);return!l.defaultPrevented}return!0}}function Pa(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Na="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Na);xo();/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const Ra={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Da=ua("<svg><!><!></svg>");function we(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]),o=me(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ne(t,!1);let n=Ee(t,"name",8,void 0),a=Ee(t,"color",8,"currentColor"),i=Ee(t,"size",8,24),l=Ee(t,"strokeWidth",8,2),d=Ee(t,"absoluteStrokeWidth",8,!1),u=Ee(t,"iconNode",24,()=>[]);const v=(...k)=>k.filter((C,N,z)=>!!C&&z.indexOf(C)===N).join(" ");Fe();var g=Da();let c;var y=f(g);$e(y,1,u,ke,(k,C)=>{let N=()=>s(C)[0],z=()=>s(C)[1];var b=j(),$=O(b);ya($,N,!0,(x,T)=>{let V;F(()=>V=tn(x,V,{...z()},void 0,x.namespaceURI===gn,x.nodeName.includes("-")))}),p(k,b)});var _=h(y);he(_,t,"default",{}),F((k,C)=>c=tn(g,c,{...Ra,...o,width:i(),height:i(),stroke:a(),"stroke-width":k,class:C},void 0,!0),[()=>d()?Number(l())*24/Number(i()):l(),()=>v("lucide-icon","lucide",n()?`lucide-${n()}`:"",r.class)],Be),p(e,g),Re()}function Qn(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"arrow-down"},()=>r,{iconNode:[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Cr(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"arrow-left"},()=>r,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Mr(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"arrow-right"},()=>r,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Gn(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"arrow-up"},()=>r,{iconNode:[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ia(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"circle-stop"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ba(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"clock"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function La(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"coffee"},()=>r,{iconNode:[["path",{d:"M10 2v2"}],["path",{d:"M14 2v2"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1"}],["path",{d:"M6 2v2"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Oa(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"file-json"},()=>r,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function qa(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"layout-grid"},()=>r,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Wa(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"list"},()=>r,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Zn(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Fa(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"play"},()=>r,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function ja(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"printer"},()=>r,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Va(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"settings"},()=>r,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ua(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"skip-back"},()=>r,{iconNode:[["polygon",{points:"19 20 9 12 19 4 19 20"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ka(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"skip-forward"},()=>r,{iconNode:[["polygon",{points:"5 4 15 12 5 20 5 4"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Xn(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function eo(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"volume-2"},()=>r,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ar(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"volume-x"},()=>r,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ha(e,t){const r=me(t,["children","$$slots","$$events","$$legacy"]);we(e,be({name:"zap"},()=>r,{iconNode:[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]],children:(n,a)=>{var i=j(),l=O(i);he(l,t,"default",{}),p(n,i)},$$slots:{default:!0}}))}function Ya(){let e=hr(null),t=hr(null);return{get selectedComponent(){return s(e)},set selectedComponent(r){m(e,Je(r))},get selectedComponentType(){return s(t)},set selectedComponentType(r){m(t,Je(r))}}}const It=Ya(),vt=window.location.hostname==="localhost"?"http://localhost:80":`http://${window.location.hostname}`,Ja=window.location.hostname==="localhost"?"ws://localhost:80/ws":`ws://${window.location.hostname}/ws`;function Qa(){const{subscribe:e,set:t,update:r}=Wr([]);return{subscribe:e,fetchAll:async()=>{try{const o=await fetch(`${vt}/api/macros`);if(!o.ok)throw new Error(`Failed to fetch macros: ${o.status} ${o.statusText}`);const n=await o.json();return t(n),n}catch(o){throw console.error("Error fetching macros:",o),o}},fetchMacro:async o=>{try{const n=await fetch(`${vt}/api/macros/${o}`);if(!n.ok)throw new Error(`Failed to fetch macro: ${n.status} ${n.statusText}`);return await n.json()}catch(n){throw console.error(`Error fetching macro ${o}:`,n),n}},createMacro:async o=>{try{const n=await fetch(`${vt}/api/macros`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!n.ok)throw new Error(`Failed to create macro: ${n.status} ${n.statusText}`);const a=await n.json();return r(i=>[...i,a]),a}catch(n){throw console.error("Error creating macro:",n),n}},updateMacro:async(o,n)=>{try{const a=await fetch(`${vt}/api/macros/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`Failed to update macro: ${a.status} ${a.statusText}`);const i=await a.json();return r(l=>l.map(d=>d.id===o?i:d)),i}catch(a){throw console.error(`Error updating macro ${o}:`,a),a}},deleteMacro:async o=>{try{const n=await fetch(`${vt}/api/macros/${o}`,{method:"DELETE"});if(!n.ok)throw new Error(`Failed to delete macro: ${n.status} ${n.statusText}`);r(a=>a.filter(i=>i.id!==o))}catch(n){throw console.error(`Error deleting macro ${o}:`,n),n}},executeMacro:async o=>{try{const n=await fetch(`${vt}/api/macros/${o}/execute`,{method:"POST"});if(!n.ok)throw new Error(`Failed to execute macro: ${n.status} ${n.statusText}`)}catch(n){throw console.error(`Error executing macro ${o}:`,n),n}}}}function Ga(){const{subscribe:e,update:t}=Wr({connected:!1,events:[]});let r=null,o=null;const n={subscribe:e,connect:()=>{try{if(Yn({subscribe:e}).connected)return;r=new WebSocket(Ja),r.onopen=()=>{console.log("WebSocket connected"),t(i=>({...i,connected:!0}))},r.onclose=()=>{o&&clearTimeout(o),t(i=>({...i,connected:!1})),console.log("WebSocket disconnected, will attempt to reconnect"),o=setTimeout(()=>n.connect(),3e3)},r.onerror=i=>{console.log("WebSocket connection error, will retry automatically"),t(l=>({...l,connected:!1}))},r.onmessage=i=>{try{const l=JSON.parse(i.data);t(d=>({...d,events:[...d.events.slice(-99),l]}))}catch(l){console.error("Error parsing WebSocket message:",l)}}}catch{console.log("Error initializing WebSocket, will retry"),o=setTimeout(()=>n.connect(),3e3)}},disconnect:()=>{r&&(r.close(),o&&(clearTimeout(o),o=null))},sendMessage:a=>r&&r.readyState===WebSocket.OPEN?(r.send(JSON.stringify(a)),Promise.resolve()):(console.error("WebSocket not connected, unable to send message"),Promise.reject(new Error("WebSocket not connected"))),executeMacro:a=>n.sendMessage({type:"execute_macro",macroId:a}),assignMacroToButton:(a,i)=>n.sendMessage({type:"assign_macro",macroId:a,buttonId:i}),saveMacro:a=>n.sendMessage({type:"save_macro",macro:a}),clearEvents:()=>{t(a=>({...a,events:[]}))}};return n}function Za(){const{subscribe:e,update:t}=Wr({loading:!1,error:null,lastSaved:null});return{subscribe:e,saveConfig:async r=>{try{t(n=>({...n,loading:!0,error:null}));const o=await fetch(`${vt}/api/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modules:r})});if(!o.ok)throw new Error(`Failed to save configuration: ${o.status} ${o.statusText}`);return t(n=>({...n,loading:!1,lastSaved:new Date().toISOString()})),!0}catch(o){throw console.error("Error saving configuration:",o),t(n=>({...n,loading:!1,error:o.message||"Failed to save configuration"})),o}},saveConfigWs:r=>Yn(an).connected?an.sendMessage({type:"save_config",data:{modules:r}}).then(()=>(t(o=>({...o,lastSaved:new Date().toISOString()})),!0)):Promise.reject(new Error("WebSocket not connected"))}}const it=Qa(),an=Ga(),gr=Za();class Xa{constructor(){this.socket=null,this.reconnectTimer=null,this.heartbeatInterval=null,this.subscribers=[],this.state={connected:!1,connectionVerified:!1,events:[],lastPingResponse:null},this.messageQueue=[],this.isConnectionReady=!1,this.connectionReadyTimeout=null,this.reconnectAttempts=0,this.maxReconnectDelay=3e4}subscribe(t){return this.subscribers.push(t),t(this.state),()=>{this.subscribers=this.subscribers.filter(r=>r!==t)}}setState(t){this.state={...this.state,...t},this.subscribers.forEach(r=>r(this.state))}connect(){try{if(this.state.connected){console.log("WebSocket already connected, skipping connection attempt");return}const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.hostname}/ws`;this.connectionReadyTimeout&&clearTimeout(this.connectionReadyTimeout),this.isConnectionReady=!1,console.log("Attempting to connect to WebSocket at:",r),this.socket=new WebSocket(r),this.socket.onopen=()=>{console.log("WebSocket connected successfully"),console.log("WebSocket readyState:",this.socket.readyState),this.setState({connected:!0}),this.reconnectAttempts=0,this.connectionReadyTimeout=setTimeout(()=>{console.log("Connection marked as ready for use"),this.isConnectionReady=!0,this.processMessageQueue(),this.requestInitialData()},1e3),this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>this.sendHeartbeat(),3e4)},this.socket.onclose=o=>{console.log("WebSocket closed with code:",o.code,"reason:",o.reason),this.cleanupConnection(),this.scheduleReconnect()},this.socket.onerror=o=>{console.error("WebSocket connection error:",o),this.cleanupConnection()},this.socket.onmessage=o=>{try{const n=JSON.parse(o.data);console.log("WebSocket message received:",{type:n.type,timestamp:new Date().toISOString(),data:n}),n.key_bindings&&(n.key_bindings=n.key_bindings.map(a=>(a.component_id&&!a.buttonId&&(a.buttonId=a.component_id),a))),this.setState({connectionVerified:!0,events:[...this.state.events.slice(-99),n],...n.type==="pong"?{lastPingResponse:Date.now()}:{}})}catch(n){console.error("Error parsing WebSocket message:",n)}}}catch(t){console.error("Error initializing WebSocket:",t),this.cleanupConnection(),this.scheduleReconnect()}}sendHeartbeat(){var t;try{this.socket&&this.socket.readyState===WebSocket.OPEN?(console.log("Sending heartbeat ping"),this.socket.send(JSON.stringify({type:"ping",timestamp:Date.now()})),setTimeout(()=>{const r=Date.now();(this.state.lastPingResponse===null||r-this.state.lastPingResponse>1e4)&&(console.log("Connection seems dead (no ping response). Last response:",this.state.lastPingResponse?new Date(this.state.lastPingResponse).toISOString():"never"),console.log("Current time:",new Date(r).toISOString()),this.reconnect())},1e4)):console.warn("WebSocket not in OPEN state during heartbeat:",(t=this.socket)==null?void 0:t.readyState)}catch(r){console.error("Error sending ping:",r)}}requestInitialData(){var t;try{this.socket&&this.socket.readyState===WebSocket.OPEN?(console.log("Requesting initial configuration data"),this.sendMessage({type:"get_all_configs"}),setTimeout(()=>{var r;this.state.connectionVerified||(console.warn("No initial data received after 5 seconds. Connection may be partially working."),console.log("Current WebSocket state:",{readyState:(r=this.socket)==null?void 0:r.readyState,connected:this.state.connected,connectionVerified:this.state.connectionVerified,lastPingResponse:this.state.lastPingResponse?new Date(this.state.lastPingResponse).toISOString():"never"}),this.setState({connectionVerified:!1}))},5e3)):console.warn("WebSocket not in OPEN state when requesting initial data:",(t=this.socket)==null?void 0:t.readyState)}catch(r){console.error("Error requesting initial data:",r)}}cleanupConnection(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.connectionReadyTimeout&&(clearTimeout(this.connectionReadyTimeout),this.connectionReadyTimeout=null),this.isConnectionReady=!1,this.setState({connected:!1,connectionVerified:!1})}scheduleReconnect(){this.reconnectAttempts+=1;const r=Math.min(1e3*Math.pow(1.5,this.reconnectAttempts-1),this.maxReconnectDelay);console.log(`WebSocket disconnected, will attempt to reconnect in ${r/1e3} seconds (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>this.connect(),r)}processMessageQueue(){if(this.messageQueue.length>0){console.log(`Processing ${this.messageQueue.length} queued messages`);const t=[...this.messageQueue];this.messageQueue=[],t.forEach((r,o)=>{setTimeout(()=>{this.sendMessage(r.message).then(r.resolve).catch(r.reject)},o*100)})}}reconnect(){this.disconnect(),this.connect()}disconnect(){this.socket&&(this.socket.close(),this.cleanupConnection()),this.setState({connected:!1,connectionVerified:!1,events:[],lastPingResponse:null})}sendMessage(t){if(this.socket&&this.socket.readyState===WebSocket.OPEN){if(!this.isConnectionReady)return new Promise((r,o)=>{console.log("Connection not fully ready, queuing message:",t),this.messageQueue.push({message:t,resolve:r,reject:o})});console.log("Sending WebSocket message:",{message:t,readyState:this.socket.readyState,timestamp:new Date().toISOString()});try{return this.socket.send(JSON.stringify(t)),Promise.resolve()}catch(r){return console.error("Error sending WebSocket message:",r),Promise.reject(r)}}else return new Promise((r,o)=>{var a;const n=this.state.connected?`WebSocket appears connected but is not in OPEN state (readyState: ${(a=this.socket)==null?void 0:a.readyState})`:"WebSocket not connected";console.log(n+", queuing message for later delivery"),this.messageQueue.push({message:t,resolve:r,reject:o}),!this.state.connected&&!this.reconnectTimer&&this.connect()})}requestAllConfigs(){return this.sendMessage({type:"get_all_configs"})}requestConfig(t){return this.sendMessage({type:"get_config",config:t})}executeMacro(t){return this.sendMessage({type:"execute_macro",macroId:t})}assignMacroToButton(t,r){return this.sendMessage({type:"assign_macro",macroId:t,buttonId:r})}}const Se=new Xa;var yt=Ea(()=>It),es=S('<div class="macro-indicator svelte-1ykdor8">M</div>'),ts=S('<div class="pending-change-indicator svelte-1ykdor8">!</div>'),rs=S('<div role="button" tabindex="0"><!> <!></div>'),ns=S('<div class="macro-indicator svelte-1ykdor8">M</div>'),os=S('<div class="pending-change-indicator svelte-1ykdor8">!</div>'),as=S('<div role="button" tabindex="0"><!> <!></div>'),ss=S("<li> </li>"),is=S('<div class="pending-changes-summary svelte-1ykdor8"><h3 class="svelte-1ykdor8">Pending Changes</h3> <ul class="svelte-1ykdor8"></ul> <div class="summary-note svelte-1ykdor8">Changes will take effect after saving</div></div>'),ls=S('<div class="module-container svelte-1ykdor8"><h2 class="svelte-1ykdor8"></h2> <h5 class="svelte-1ykdor8"></h5> <div class="module svelte-1ykdor8"></div> <!></div>');function cs(e,t){Ne(t,!1);let r=Ee(t,"moduleInfo",8),o=Ee(t,"selectedComponentId",8,null);const n=r().id,a=r().name,i=r().gridSize,l=r().components,d=Jn();let u=U({}),v=[],g=!0,c=U({});gt(async()=>{try{g=!0,v=await it.fetchAll(),g=!1,y(),l.length>0&&_(l[0])}catch(A){console.error("Failed to load macros:",A),g=!1}});function y(){m(u,{}),l.forEach(A=>{if(A.keyBinding&&A.keyBinding.startsWith("macro:")){const M=A.keyBinding.replace("macro:","");Ie(u,s(u)[A.id]=M)}})}function _(A){var I;yt(yt().selectedComponent=A.id),yt(yt().selectedComponentType=A.type);const M={id:A.id,type:A.type,position:A.position,currentBinding:(I=A.keyBinding)!=null&&I.startsWith("macro:")?k(A.keyBinding.replace("macro:","")):A.keyBinding||null,pendingBinding:s(c)[A.id]?s(c)[A.id].macroName||s(c)[A.id].macroId:null};d("componentSelected",{component:M,module:r()})}function k(A){if(!A||!v.length)return null;const M=v.find(I=>I.id===A);return M?M.name:null}function C(A){const M=["cell",A.id,A.type];return(o()===A.id||yt().selectedComponent===A.id)&&M.push("selected"),s(u)[A.id]&&M.push("has-macro"),s(c)[A.id]&&M.push("has-pending-change"),M.join(" ")}function N(A,M){Ie(c,s(c)[A]={macroId:M,macroName:k(M)});const I=l.find(E=>E.id===A);I&&_(I)}function z(){m(c,{});const A=yt().selectedComponent,M=l.find(I=>I.id===A);M&&_(M)}Fe();var b=ls(),$=f(b);$.textContent=a;var x=h($,2);x.textContent=n;var T=h(x,2);$e(T,5,()=>l,ke,(A,M)=>{var I=j(),E=O(I);{var q=Y=>{var B=rs(),Q=f(B);{var se=w=>{var P=es();p(w,P)};L(Q,w=>{s(u)[s(M).id]&&w(se)})}var D=h(Q,2);{var Z=w=>{var P=ts();p(w,P)};L(D,w=>{s(c)[s(M).id]&&w(Z)})}F((w,P)=>{ze(B,Er(w),"svelte-1ykdor8"),st(B,"style",`
            grid-area: ${s(M).position.row+1} / ${s(M).position.column+1} / span ${s(M).size.rows??""} / span ${s(M).size.columns??""};
          `),st(B,"title",P)},[()=>C(s(M)),()=>s(u)[s(M).id]?`Macro: ${k(s(u)[s(M).id])}`:""],Be),W("click",B,()=>_(s(M))),W("keydown",B,w=>w.key==="Enter"&&_(s(M))),p(Y,B)},J=Y=>{var B=as(),Q=f(B);{var se=w=>{var P=ns();p(w,P)};L(Q,w=>{s(u)[s(M).id]&&w(se)})}var D=h(Q,2);{var Z=w=>{var P=os();p(w,P)};L(D,w=>{s(c)[s(M).id]&&w(Z)})}F((w,P)=>{ze(B,Er(w),"svelte-1ykdor8"),st(B,"style",`grid-column: ${s(M).position.column+1}; grid-row: ${s(M).position.row+1}`),st(B,"title",P)},[()=>C(s(M)),()=>s(u)[s(M).id]?`Macro: ${k(s(u)[s(M).id])}`:""],Be),W("click",B,()=>_(s(M))),W("keydown",B,w=>w.key==="Enter"&&_(s(M))),p(Y,B)};L(E,Y=>{s(M).size?Y(q):Y(J,!1)})}p(A,I)});var V=h(T,2);{var R=A=>{var M=is(),I=h(f(M),2);$e(I,5,()=>Object.entries(s(c)),ke,(E,q)=>{let J=()=>s(q)[0],Y=()=>s(q)[1];var B=ss(),Q=f(B);F(()=>K(Q,`${J()??""}: ${(Y().macroName||Y().macroId)??""}`)),p(E,B)}),p(A,M)};L(V,A=>{Object.keys(s(c)).length>0&&A(R)})}return F(()=>st(T,"style",`grid-template-columns: repeat(${i.columns??""}, 40px); grid-template-rows: repeat(${i.rows??""}, 40px)`)),p(e,b),nn(t,"setPendingChange",N),nn(t,"clearPendingChanges",z),Re({setPendingChange:N,clearPendingChanges:z})}var us=S('<div class="component-details-panel svelte-t9rc8z"><h3>Component Details</h3> <div class="details-content svelte-t9rc8z"><p class="svelte-t9rc8z"><strong>ID:</strong> </p> <p class="svelte-t9rc8z"><strong>Type:</strong> </p> <p class="svelte-t9rc8z"><strong>Position:</strong> </p> <div class="assignment-details svelte-t9rc8z"><h4>Bindings</h4> <p class="assignment-line svelte-t9rc8z"><span class="label svelte-t9rc8z">Current:</span> <span class="current-binding svelte-t9rc8z"> </span></p> <p><span class="label svelte-t9rc8z">New:</span> <span class="new-binding svelte-t9rc8z"> </span></p></div></div></div>'),ds=S("<p>Select a component to view details</p>"),vs=S('<div class="module-wrapper svelte-t9rc8z"><!></div>'),fs=S('<div class="macropad-view svelte-t9rc8z"><div class="details-sidebar svelte-t9rc8z"><!></div> <div class="modules-container svelte-t9rc8z"></div></div>');function ps(e,t){Ne(t,!1);let r=Ee(t,"modules",8),o=U(null),n=U(null);function a(c){m(o,c.detail.component),m(n,c.detail.module)}br(()=>(Bn(r()),s(n)),()=>{r()&&r().length>0&&!s(n)&&(m(n,r()[0]),s(n).components&&s(n).components.length>0&&m(o,s(n).components[0]))}),Cn(),Fe();var i=fs(),l=f(i),d=f(l);{var u=c=>{var y=us(),_=h(f(y),2),k=f(_),C=h(f(k)),N=h(k,2),z=h(f(N)),b=h(N,2),$=h(f(b)),x=h(b,2),T=h(f(x),2),V=h(f(T),2),R=f(V),A=h(T,2),M=h(f(A),2),I=f(M);F(()=>{K(C,` ${s(o).id??""}`),K(z,` ${s(o).type??""}`),K($,` Row ${s(o).position.row??""}, Col ${s(o).position.column??""}`),K(R,s(o).currentBinding||"None"),ze(A,`assignment-line ${(s(o).pendingBinding?"pending":"")??""} svelte-t9rc8z`),K(I,s(o).pendingBinding||"None")}),p(c,y)},v=c=>{var y=ds();p(c,y)};L(d,c=>{s(o)?c(u):c(v,!1)})}var g=h(l,2);$e(g,5,r,ke,(c,y)=>{var _=vs(),k=f(_);const C=Be(()=>{var N;return(N=s(o))==null?void 0:N.id});cs(k,{get moduleInfo(){return s(y)},get selectedComponentId(){return s(C)},$$events:{componentSelected:a}}),p(c,_)}),p(e,i),Re()}var _s=S('<button class="svelte-4yxp50"><!> <span> </span></button>'),gs=S('<div class="encoder-options svelte-4yxp50"><div class="direction-toggle svelte-4yxp50"><button class="svelte-4yxp50"><!> <span>Left</span></button> <button class="svelte-4yxp50"><!> <span>Right</span></button></div> <div class="speed-slider svelte-4yxp50"><!> <input type="range" min="0" max="100" class="svelte-4yxp50"> <!> <span class="speed-value svelte-4yxp50"> </span></div> <div class="actions-grid svelte-4yxp50"></div></div>');function ms(e){let t=U("right"),r=U(50),o=U(null);const n=[{key:"Arrow Left",icon:Cr},{key:"Arrow Right",icon:Mr},{key:"Arrow Up",icon:Gn},{key:"Arrow Down",icon:Qn},{key:"Brightness Up",icon:Xn},{key:"Brightness Down",icon:Zn},{key:"Volume Up",icon:eo},{key:"Volume Down",icon:Ar}];function a(x){m(t,x)}function i(x){m(r,parseInt(x.target.value))}function l(x){m(o,x)}var d=gs(),u=f(d),v=f(u),g=f(v);Cr(g,{size:"20"});var c=h(v,2),y=f(c);Mr(y,{size:"20"});var _=h(u,2),k=f(_);Ba(k,{size:"16",title:"Slow"});var C=h(k,2),N=h(C,2);Ha(N,{size:"16",title:"Fast"});var z=h(N,2),b=f(z),$=h(_,2);$e($,5,()=>n,ke,(x,T)=>{var V=_s(),R=f(V);jn(R,()=>s(T).icon,(I,E)=>{E(I,{size:"20"})});var A=h(R,2),M=f(A);F(()=>{fr(V,"selected",s(o)&&s(o).key===s(T).key),K(M,s(T).key)}),W("click",V,()=>l(s(T))),p(x,V)}),F(()=>{fr(v,"selected",s(t)==="left"),fr(c,"selected",s(t)==="right"),K(b,s(r))}),W("click",v,()=>a("left")),W("click",c,()=>a("right")),ft(C,()=>s(r),x=>m(r,x)),W("input",C,i),p(e,d)}var hs=S('<button class="keyboard-key svelte-1jicinv"><!></button>'),ys=S('<div class="keyboard-row svelte-1jicinv"></div>'),bs=S('<div class="keyboard-container svelte-1jicinv"></div>');function ws(e,t){Ne(t,!1);let r=Ee(t,"selectedKey",8),o=Ee(t,"assignKey",8);const n=[[{key:"Volume Up",size:1},{key:"Volume Down",size:1},{key:"Mute",size:1},{key:"Play/Pause",size:1},{key:"Stop",size:1}],[{key:"Next Track",size:1},{key:"Previous Track",size:1},{key:"Brightness Up",size:1},{key:"Brightness Down",size:1}],[{key:"Print Screen",size:1},{key:"Scroll Lock",size:1},{key:"Pause/Break",size:1}],[{key:"Insert",size:1},{key:"Home",size:1},{key:"End",size:1},{key:"Page Up",size:1},{key:"Page Down",size:1}],[{key:"Left Arrow",size:1},{key:"Right Arrow",size:1},{key:"Up Arrow",size:1},{key:"Down Arrow",size:1}]],a={"Volume Up":eo,"Volume Down":Ar,Mute:Ar,"Play/Pause":Fa,Stop:Ia,"Next Track":Ka,"Previous Track":Ua,"Brightness Up":Xn,"Brightness Down":Zn,"Print Screen":ja,"Scroll Lock":null,"Pause/Break":null,Insert:null,Home:null,End:null,"Page Up":null,"Page Down":null,"Left Arrow":Cr,"Right Arrow":Mr,"Up Arrow":Gn,"Down Arrow":Qn};Fe();var i=bs();$e(i,5,()=>n,ke,(l,d)=>{var u=ys();$e(u,5,()=>s(d),ke,(v,g)=>{var c=hs(),y=f(c);{var _=C=>{var N=j(),z=O(N);jn(z,()=>a[s(g).key],(b,$)=>{$(b,{size:"16"})}),p(C,N)},k=C=>{var N=da();F(()=>K(N,s(g).key)),p(C,N)};L(y,C=>{a[s(g).key]?C(_):C(k,!1)})}F(()=>st(c,"style",`flex: ${s(g).size??""}`)),W("click",c,()=>o()(r(),s(g).key)),p(v,c)}),p(l,u)}),p(e,i),Re()}var xs=S('<div class="error-message svelte-lqtpp9"> </div>'),ks=S('<div class="loading svelte-lqtpp9">Loading macros...</div>'),$s=S('<div class="no-selection svelte-lqtpp9"><p>Select a key on the grid to assign a macro</p></div>'),Ss=S('<div class="current-assignment svelte-lqtpp9"><h4 class="svelte-lqtpp9">Current Assignment</h4> <p> </p> <p> </p> <div class="actions svelte-lqtpp9"><button class="button button-secondary svelte-lqtpp9">Test Macro</button> <button class="button button-danger svelte-lqtpp9">Remove Assignment</button></div></div>'),Es=S("<p>No macro currently assigned</p>"),Cs=S("<p>No macros available. Create some first!</p>"),Ms=S('<li><div class="macro-item svelte-lqtpp9"><div class="macro-info"><strong> </strong> <span class="macro-id svelte-lqtpp9"> </span></div> <div class="macro-actions svelte-lqtpp9"><button class="button button-small svelte-lqtpp9">Assign</button> <button class="button button-small button-secondary svelte-lqtpp9">Preview</button></div></div></li>'),As=S('<ul class="svelte-lqtpp9"></ul>'),zs=S('<div class="editor-content svelte-lqtpp9"><h3 class="svelte-lqtpp9"> </h3> <!> <div class="macro-list svelte-lqtpp9"><h4 class="svelte-lqtpp9">Available Macros</h4> <!></div> <div class="pending-actions svelte-lqtpp9"><button class="button button-secondary svelte-lqtpp9">Cancel All Changes</button> <button class="button svelte-lqtpp9"> </button></div></div>'),Ts=S('<div class="macro-editor svelte-lqtpp9"><h2 class="svelte-lqtpp9">Macro Editor</h2> <!> <!></div>');function Ps(e,t){Ne(t,!1);const r=U(),o=U();let n=U([]),a=U(!0),i=U(null),l=!1,d=U(!1),u=null;const v=gr.subscribe(E=>{m(d,E.loading),E.error&&m(i,`Failed to save configuration: ${E.error}`)}),g=Se.subscribe(E=>{l=E.connected});gt(async()=>{try{m(a,!0),m(n,await it.fetchAll()),m(a,!1),setTimeout(()=>{const E=document.querySelector(".module-container");E&&E.__svelte&&(u=E.__svelte,console.log("Module component found:",u))},500)}catch(E){m(i,E.message||"Failed to load macros"),m(a,!1)}return()=>{g(),v()}});function c(){var E,q,J,Y;return(Y=(J=(q=(E=document.querySelector(".macropad-view"))==null?void 0:E.parentNode)==null?void 0:q.__svelte)==null?void 0:J.ctx)==null?void 0:Y.get(0)}function y(E){const q=c();if(!q)return null;for(const J of q)for(const Y of J.components)if(Y.id===E)return Y;return null}function _(E){if(!E)return null;const q=y(E);if(!q||!q.keyBinding||!q.keyBinding.startsWith("macro:"))return null;const J=q.keyBinding.replace("macro:","");return s(n).length?s(n).find(B=>B.id===J)||null:{id:J,name:"Loading..."}}async function k(){const E=c();if(!E)return alert("Could not access module configuration. Please try again."),!1;try{return l?await gr.saveConfigWs(E):await gr.saveConfig(E),u&&u.clearPendingChanges(),!0}catch(q){return m(i,q.message||"Failed to save configuration"),!1}}async function C(E){if(s(r)){const q=y(s(r));if(q){if(u&&u.setPendingChange(s(r),E),q.keyBinding=`macro:${E}`,await k()){b();const Y=s(n).find(B=>B.id===E);Y&&alert(`Macro "${Y.name}" successfully assigned to component ${s(r)}`)}}else alert(`Component ${s(r)} not found in any module`)}}async function N(){if(s(r)){const E=y(s(r));if(E&&E.keyBinding&&E.keyBinding.startsWith("macro:")){u&&u.setPendingChange(s(r),null);const q=E.keyBinding;E.keyBinding="",await k()?(b(),alert(`Macro assignment removed from component ${s(r)}`)):E.keyBinding=q}else alert(`Component ${s(r)} does not have a macro assigned`)}}async function z(E){try{await it.executeMacro(E),alert("Macro executed successfully")}catch(q){m(i,q.message||"Failed to execute macro")}}function b(){var q,J,Y,B;const E=c();if(E){const Q=[...E];(B=(Y=(J=(q=document.querySelector(".macropad-view"))==null?void 0:q.parentNode)==null?void 0:J.__svelte)==null?void 0:Y.ctx)==null||B.set(0,Q)}}function $(E){s(r)&&u&&u.setPendingChange(s(r),E)}function x(){u&&u.clearPendingChanges()}br(()=>It,()=>{m(r,It.selectedComponent)}),br(()=>s(r),()=>{m(o,_(s(r)))}),Cn(),Fe();var T=Ts(),V=h(f(T),2);{var R=E=>{var q=xs(),J=f(q);F(()=>K(J,s(i))),p(E,q)};L(V,E=>{s(i)&&E(R)})}var A=h(V,2);{var M=E=>{var q=ks();p(E,q)},I=E=>{var q=j(),J=O(q);{var Y=Q=>{var se=$s();p(Q,se)},B=Q=>{var se=zs(),D=f(se),Z=f(D),w=h(D,2);{var P=G=>{var ce=Ss(),ue=h(f(ce),2),ve=f(ue),ye=h(ue,2),xe=f(ye),_e=h(ye,2),ge=f(_e),fe=h(ge,2);F(()=>{K(ve,`Macro: ${s(o).name??""}`),K(xe,`ID: ${s(o).id??""}`),ge.disabled=s(d),fe.disabled=s(d)}),W("click",ge,()=>z(s(o).id)),W("click",fe,N),p(G,ce)},H=G=>{var ce=Es();p(G,ce)};L(w,G=>{s(o)?G(P):G(H,!1)})}var X=h(w,2),oe=h(f(X),2);{var ee=G=>{var ce=Cs();p(G,ce)},pe=G=>{var ce=As();$e(ce,5,()=>s(n),ke,(ue,ve)=>{var ye=Ms(),xe=f(ye),_e=f(xe),ge=f(_e),fe=f(ge),Te=h(ge,2),Le=f(Te),je=h(_e,2),Oe=f(je),dt=h(Oe,2);F(()=>{K(fe,s(ve).name),K(Le,s(ve).id),Oe.disabled=s(d)}),W("click",Oe,()=>C(s(ve).id)),W("click",dt,()=>$(s(ve).id)),p(ue,ye)}),p(G,ce)};L(oe,G=>{s(n).length===0?G(ee):G(pe,!1)})}var le=h(X,2),te=f(le),re=h(te,2),de=f(re);F(()=>{K(Z,`Selected Component: ${s(r)??""}`),re.disabled=s(d),K(de,s(d)?"Saving...":"Save All Changes")}),W("click",te,x),W("click",re,k),p(Q,se)};L(J,Q=>{s(r)?Q(B,!1):Q(Y)},!0)}p(E,q)};L(A,E=>{s(a)?E(M):E(I,!1)})}p(e,T),Re()}var Ns=S('<button class="keyboard-key svelte-1bc1pux"> </button>'),Rs=S('<div class="keyboard-row svelte-1bc1pux"></div>'),Ds=S('<div class="keyboard-container svelte-1bc1pux"></div>');function Is(e,t){Ne(t,!1);let r=Ee(t,"selectedKey",8),o=Ee(t,"assignKey",8);const n=[[{key:"Esc",size:1},{key:"1",size:1},{key:"2",size:1},{key:"3",size:1},{key:"4",size:1},{key:"5",size:1},{key:"6",size:1},{key:"7",size:1},{key:"8",size:1},{key:"9",size:1},{key:"0",size:1},{key:"-",size:1},{key:"=",size:1},{key:"Backspace",size:2}],[{key:"Tab",size:1.5},{key:"Q",size:1},{key:"W",size:1},{key:"E",size:1},{key:"R",size:1},{key:"T",size:1},{key:"Y",size:1},{key:"U",size:1},{key:"I",size:1},{key:"O",size:1},{key:"P",size:1},{key:"[",size:1},{key:"]",size:1},{key:"\\",size:1.5}],[{key:"Caps",size:1.75},{key:"A",size:1},{key:"S",size:1},{key:"D",size:1},{key:"F",size:1},{key:"G",size:1},{key:"H",size:1},{key:"J",size:1},{key:"K",size:1},{key:"L",size:1},{key:";",size:1},{key:"'",size:1},{key:"Enter",size:2.25}],[{key:"Shift",size:2.25},{key:"Z",size:1},{key:"X",size:1},{key:"C",size:1},{key:"V",size:1},{key:"B",size:1},{key:"N",size:1},{key:"M",size:1},{key:",",size:1},{key:".",size:1},{key:"/",size:1},{key:"Shift",size:2.75}],[{key:"Ctrl",size:1.25},{key:"Alt",size:1.25},{key:"Space",size:6.25},{key:"Alt",size:1.25},{key:"Fn",size:1.25},{key:"Ctrl",size:1.25}]];Fe();var a=Ds();$e(a,5,()=>n,ke,(i,l)=>{var d=Rs();$e(d,5,()=>s(l),ke,(u,v)=>{var g=Ns(),c=f(g);F(()=>{st(g,"style",`flex: ${s(v).size??""}`),K(c,s(v).key)}),W("click",g,()=>o()(r(),s(v).key)),p(u,g)}),p(i,d)}),p(e,a),Re()}var Bs=S("<button> </button>"),Ls=S('<div class="basic-options"><!></div>'),Os=S('<div class="extended-options"><!></div>'),qs=S('<div class="macro-options"><!></div>'),Ws=S('<div class="display-options"><!></div>'),Fs=S('<div class="encoder-options"><!></div>'),js=S('<div class="nav-tabs svelte-ow6wc5"></div> <div class="tab-content svelte-ow6wc5"><!></div>',1),Vs=S('<div class="no-selection svelte-ow6wc5">Select a component to view options</div>'),Us=S('<nav class="macropad-options svelte-ow6wc5"><!></nav>');function Ks(e,t){Ne(t,!0);const r={button:["Basic","Extended","Macros"],display:["Display"],encoder:["Encoder"],"encoder-btn":["Basic","Extended","Macros","Encoder"]};let o=xt(()=>r[It.selectedComponentType]||[]),n=hr("");function a(v){m(n,Je(v))}var i=Us(),l=f(i);{var d=v=>{var g=js(),c=O(g);$e(c,21,()=>s(o),ke,(N,z)=>{var b=Bs(),$=f(b);F(()=>{ze(b,`nav-tab ${(s(n)===s(z)?"active":"")??""} svelte-ow6wc5`),K($,s(z))}),W("click",b,()=>a(s(z))),p(N,b)});var y=h(c,2),_=f(y);{var k=N=>{var z=Ls(),b=f(z);Is(b,{}),p(N,z)},C=N=>{var z=j(),b=O(z);{var $=T=>{var V=Os(),R=f(V);ws(R,{}),p(T,V)},x=T=>{var V=j(),R=O(V);{var A=I=>{var E=qs(),q=f(E);Ps(q,{}),p(I,E)},M=I=>{var E=j(),q=O(E);{var J=B=>{var Q=Ws();p(B,Q)},Y=B=>{var Q=j(),se=O(Q);{var D=Z=>{var w=Fs(),P=f(w);ms(P),p(Z,w)};L(se,Z=>{s(n)==="Encoder"&&Z(D)},!0)}p(B,Q)};L(q,B=>{s(n)==="Display"?B(J):B(Y,!1)},!0)}p(I,E)};L(R,I=>{s(n)==="Macros"?I(A):I(M,!1)},!0)}p(T,V)};L(b,T=>{s(n)==="Extended"?T($):T(x,!1)},!0)}p(N,z)};L(_,N=>{s(n)==="Basic"?N(k):N(C,!1)})}p(v,g)},u=v=>{var g=Vs();p(v,g)};L(l,v=>{It.selectedComponentType?v(d):v(u,!1)})}p(e,i),Re()}var Hs=S('<div class="loading svelte-r0vez3"><p>Loading macropad data...</p></div>'),Ys=S('<div class="error svelte-r0vez3"><p> </p></div>'),Js=S('<div class="top-section svelte-r0vez3"><!></div> <div class="bottom-section svelte-r0vez3"><!></div>',1),Qs=S('<div class="container svelte-r0vez3"><!></div>');function Gs(e,t){Ne(t,!1);let r=U([]),o=U(!0),n=U(null),a;const i=5e3;let l,d={id:"A1:B2:C3:D4:E5:F6",name:"Main Module",description:"This is the main module with a display, rotary encoder, and buttons.",gridSize:{rows:5,columns:5},components:[{id:"display-1",type:"display",position:{row:0,column:0},size:{rows:2,columns:3},keyBinding:null},{id:"rotary-btn-1",type:"encoder-btn",position:{row:0,column:4},keyBinding:"Volume Up"},{id:"btn-1",type:"button",position:{row:0,column:3},keyBinding:"DELAY 500; PRESS Ctrl; PRESS Z; RELEASE Ctrl; RELEASE Z"},{id:"btn-2",type:"button",position:{row:1,column:3},keyBinding:"DELAY 100; PRESS Alt; PRESS F4; RELEASE Alt; RELEASE F4"},{id:"btn-3",type:"button",position:{row:1,column:4},keyBinding:"DELAY 500; PRESS Ctrl; PRESS C; RELEASE Ctrl; RELEASE C"},{id:"btn-4",type:"button",position:{row:2,column:0},keyBinding:"DELAY 200; PRESS Space; RELEASE Space"},{id:"btn-5",type:"button",position:{row:2,column:1},keyBinding:"Ctrl+V"},{id:"btn-6",type:"button",position:{row:2,column:2},keyBinding:"Ctrl+A"},{id:"btn-7",type:"button",position:{row:2,column:3},keyBinding:"DELAY 200; PRESS Shift; PRESS Esc; RELEASE Shift; RELEASE Esc"},{id:"btn-8",type:"button",position:{row:2,column:4},keyBinding:"DELAY 300; PRESS Ctrl; PRESS S; RELEASE Ctrl; RELEASE S"},{id:"btn-9",type:"button",position:{row:3,column:0},keyBinding:"F5"},{id:"btn-10",type:"button",position:{row:3,column:1},keyBinding:"F11"},{id:"btn-11",type:"button",position:{row:3,column:2},keyBinding:"Alt+Tab"},{id:"btn-12",type:"button",position:{row:3,column:3},keyBinding:"Ctrl+Shift+Esc"},{id:"btn-13",type:"button",position:{row:3,column:4},keyBinding:"Ctrl+P"},{id:"btn-14",type:"button",position:{row:4,column:0},keyBinding:"Alt+F4"},{id:"btn-15",type:"button",position:{row:4,column:1},keyBinding:"Ctrl+W"},{id:"btn-16",type:"button",position:{row:4,column:2},keyBinding:"Ctrl+Shift+T"},{id:"btn-17",type:"button",position:{row:4,column:3},keyBinding:"Ctrl+N"},{id:"btn-18",type:"button",position:{row:4,column:4},keyBinding:"Ctrl+Shift+S"}]};function u(){Se.subscribe(k=>{k.connected||(console.log("WebSocket not connected, attempting to connect..."),Se.connect())})(),Se.sendMessage({type:"get_all_configs"}).catch(k=>{console.error("Error requesting configs:",k)})}gt(()=>{m(o,!0);try{a=Se.subscribe(_=>{if(_.connected&&s(r).length===0&&u(),_.events&&_.events.length>0){const k=_.events.filter(C=>C.type==="config_data"&&C.configType==="modules");if(k.length>0){const C=k[k.length-1].data;C&&Array.isArray(C)&&C.length>0&&(console.log("Received module data from WebSocket:",C),m(r,C),m(o,!1),l&&(clearTimeout(l),l=null))}}}),u(),l=setTimeout(()=>{s(r).length===0&&(console.log("No data received within timeout, using example data"),m(r,[d]),m(o,!1))},i)}catch(_){console.error("Error setting up WebSocket connection:",_),m(n,_.message||"Failed to load module data"),m(r,[d]),m(o,!1)}return()=>{a&&a(),l&&clearTimeout(l)}}),Fe();var v=Qs(),g=f(v);{var c=_=>{var k=Hs();p(_,k)},y=_=>{var k=j(),C=O(k);{var N=b=>{var $=Ys(),x=f($),T=f(x);F(()=>K(T,`Error loading macropad data: ${s(n)??""}`)),p(b,$)},z=b=>{var $=Js(),x=O($),T=f(x);ps(T,{get modules(){return s(r)}});var V=h(x,2),R=f(V);Ks(R,{}),p(b,$)};L(C,b=>{s(n)?b(N):b(z,!1)},!0)}p(_,k)};L(g,_=>{s(o)?_(c):_(y,!1)})}p(e,v),Re()}var Zs=S('<div class="lightings-tab-container svelte-1iq6ddv"><!> <!></div>');function Xs(e){let t=U(null);var r=Zs(),o=f(r);LightingsDisplay(o,{get selectedLED(){return s(t)},set selectedLED(a){m(t,a)},$$legacy:!0});var n=h(o,2);LightingsEditor(n,{get selectedLED(){return s(t)}}),p(e,r)}var ei=S('<div><label class="block text-xs text-gray-500 mb-1"></label> <input type="text" class="w-full p-1 border border-gray-300 rounded"></div>'),ti=S('<button class="px-2 py-1 text-xs bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50"> </button>'),ri=S('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">Key Report (HID Keyboard Report)</label> <div class="grid grid-cols-4 gap-2 mb-3"></div> <div class="bg-gray-100 p-3 rounded-md"><h3 class="text-sm font-medium mb-2">Common Keys</h3> <div class="flex flex-wrap gap-2"></div> <p class="text-xs text-gray-500 mt-2">Byte 0: Modifiers, Byte 2: Key code</p></div></div>'),ni=S('<div><label class="block text-xs text-gray-500 mb-1"></label> <input type="text" class="w-full p-1 border border-gray-300 rounded"></div>'),oi=S('<button class="px-2 py-1 text-xs bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50"> </button>'),ai=S('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">Consumer Report</label> <div class="grid grid-cols-4 gap-2 mb-3"></div> <div class="bg-gray-100 p-3 rounded-md"><h3 class="text-sm font-medium mb-2">Common Consumer Controls</h3> <div class="flex flex-wrap gap-2"></div></div></div>'),si=S('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="delay-ms">Delay (milliseconds)</label> <input id="delay-ms" type="number" min="1" max="10000" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"> <p class="text-xs text-gray-500 mt-1">Delay between 1 and 10000 milliseconds</p></div>'),ii=S('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="text-content">Text to Type</label> <textarea id="text-content" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" rows="3"></textarea></div>'),li=S('<div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="target-macro">Target Macro ID</label> <input id="target-macro" type="text" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Enter the ID of the macro to execute"> <p class="text-xs text-gray-500 mt-1">This will execute another macro as part of this sequence</p></div>'),ci=S('<span class="text-xs text-gray-500 ml-2"> </span>'),ui=S('<span class="text-xs text-gray-500 ml-2"> </span>'),di=S('<span class="text-xs text-gray-500 ml-2"> </span>'),vi=S('<span class="text-xs text-gray-500 ml-2"> </span>'),fi=S('<span class="text-xs text-gray-500 ml-2"> </span>'),pi=S('<li class="p-3 flex justify-between items-center hover:bg-gray-50"><div><span class="font-medium"> </span> <!></div> <button class="text-red-500 hover:text-red-700">×</button></li>'),_i=S('<div class="mt-6"><h3 class="font-medium mb-2">Command Sequence</h3> <ul class="border rounded-md divide-y"></ul></div>'),gi=S('<div class="command-editor"><div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="command-type">Command Type</label> <select id="command-type" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"><option>Key Press (press and release)</option><option>Key Down (press and hold)</option><option>Key Up (release all keys)</option><option>Consumer Control</option><option>Delay</option><option>Type Text</option><option>Execute Macro</option></select></div> <!> <div class="flex justify-end"><button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300">Add Command</button></div> <!></div>');function mi(e,t){Ne(t,!1);let r=Ee(t,"commands",28,()=>[]);const o=Jn();let n=U("key_press"),a=U(new Array(8).fill(0)),i=U(new Array(4).fill(0)),l=U(100),d=U(""),u=U("");function v(){let D;switch(s(n)){case"key_press":D={type:"key_press",report:[...s(a)]};break;case"key_down":D={type:"key_down",report:[...s(a)]};break;case"key_up":D={type:"key_up"};break;case"consumer_press":D={type:"consumer_press",report:[...s(i)]};break;case"delay":D={type:"delay",ms:s(l)};break;case"type_text":D={type:"type_text",text:s(d)};break;case"execute_macro":D={type:"execute_macro",macro_id:s(u)};break}D&&(r([...r(),D]),o("update",{commands:r()}),c())}function g(D){r(r().filter((Z,w)=>w!==D)),o("update",{commands:r()})}function c(){switch(s(n)){case"key_press":case"key_down":m(a,new Array(8).fill(0));break;case"consumer_press":m(i,new Array(4).fill(0));break;case"delay":m(l,100);break;case"type_text":m(d,"");break;case"execute_macro":m(u,"");break}}function y(D,Z,w=!0){let P;try{Z.startsWith("0x")?P=parseInt(Z.substring(2),16):P=parseInt(Z,16)}catch{return}isNaN(P)||P<0||P>255||(w?(Ie(a,s(a)[D]=P),m(a,[...s(a)])):(Ie(i,s(i)[D]=P),m(i,[...s(i)])))}const _=[{name:"A",code:"0x04"},{name:"B",code:"0x05"},{name:"C",code:"0x06"},{name:"D",code:"0x07"},{name:"Ctrl",code:"0xE0"},{name:"Shift",code:"0xE1"},{name:"Alt",code:"0xE2"},{name:"Enter",code:"0x28"},{name:"Esc",code:"0x29"},{name:"Backspace",code:"0x2A"},{name:"Tab",code:"0x2B"},{name:"Space",code:"0x2C"}],k=[{name:"Play/Pause",code:"0xCD"},{name:"Mute",code:"0xE2"},{name:"Volume Up",code:"0xE9"},{name:"Volume Down",code:"0xEA"},{name:"Media Next",code:"0xB5"},{name:"Media Previous",code:"0xB6"}];function C(D){m(a,new Array(8).fill(0)),D==="0xE0"||D==="0xE1"||D==="0xE2"?Ie(a,s(a)[0]=parseInt(D.substring(2),16)):Ie(a,s(a)[2]=parseInt(D.substring(2),16)),m(a,[...s(a)])}function N(D){m(i,new Array(4).fill(0)),Ie(i,s(i)[0]=parseInt(D.substring(2),16)),m(i,[...s(i)])}Fe();var z=gi(),b=f(z),$=h(f(b),2);F(()=>{s(n),Zo(()=>{})});var x=f($);x.value=(x.__value="key_press")==null?"":"key_press";var T=h(x);T.value=(T.__value="key_down")==null?"":"key_down";var V=h(T);V.value=(V.__value="key_up")==null?"":"key_up";var R=h(V);R.value=(R.__value="consumer_press")==null?"":"consumer_press";var A=h(R);A.value=(A.__value="delay")==null?"":"delay";var M=h(A);M.value=(M.__value="type_text")==null?"":"type_text";var I=h(M);I.value=(I.__value="execute_macro")==null?"":"execute_macro";var E=h(b,2);{var q=D=>{var Z=ri(),w=h(f(Z),2);$e(w,5,()=>s(a),ke,(X,oe,ee)=>{var pe=ei(),le=f(pe);le.textContent=`Byte ${ee??""}`;var te=h(le,2);F(re=>en(te,re),[()=>`0x${s(oe).toString(16).padStart(2,"0").toUpperCase()}`],Be),W("change",te,re=>y(ee,re.target.value,!0)),p(X,pe)});var P=h(w,2),H=h(f(P),2);$e(H,5,()=>_,ke,(X,oe)=>{var ee=ti(),pe=f(ee);F(()=>K(pe,s(oe).name)),W("click",ee,()=>C(s(oe).code)),p(X,ee)}),p(D,Z)},J=D=>{var Z=j(),w=O(Z);{var P=X=>{var oe=ai(),ee=h(f(oe),2);$e(ee,5,()=>s(i),ke,(te,re,de)=>{var G=ni(),ce=f(G);ce.textContent=`Byte ${de??""}`;var ue=h(ce,2);F(ve=>en(ue,ve),[()=>`0x${s(re).toString(16).padStart(2,"0").toUpperCase()}`],Be),W("change",ue,ve=>y(de,ve.target.value,!1)),p(te,G)});var pe=h(ee,2),le=h(f(pe),2);$e(le,5,()=>k,ke,(te,re)=>{var de=oi(),G=f(de);F(()=>K(G,s(re).name)),W("click",de,()=>N(s(re).code)),p(te,de)}),p(X,oe)},H=X=>{var oe=j(),ee=O(oe);{var pe=te=>{var re=si(),de=h(f(re),2);ft(de,()=>s(l),G=>m(l,G)),p(te,re)},le=te=>{var re=j(),de=O(re);{var G=ue=>{var ve=ii(),ye=h(f(ve),2);ft(ye,()=>s(d),xe=>m(d,xe)),p(ue,ve)},ce=ue=>{var ve=j(),ye=O(ve);{var xe=_e=>{var ge=li(),fe=h(f(ge),2);ft(fe,()=>s(u),Te=>m(u,Te)),p(_e,ge)};L(ye,_e=>{s(n)==="execute_macro"&&_e(xe)},!0)}p(ue,ve)};L(de,ue=>{s(n)==="type_text"?ue(G):ue(ce,!1)},!0)}p(te,re)};L(ee,te=>{s(n)==="delay"?te(pe):te(le,!1)},!0)}p(X,oe)};L(w,X=>{s(n)==="consumer_press"?X(P):X(H,!1)},!0)}p(D,Z)};L(E,D=>{s(n)==="key_press"||s(n)==="key_down"?D(q):D(J,!1)})}var Y=h(E,2),B=f(Y),Q=h(Y,2);{var se=D=>{var Z=_i(),w=h(f(Z),2);$e(w,5,r,ke,(P,H,X)=>{var oe=pi(),ee=f(oe),pe=f(ee),le=f(pe),te=h(pe,2);{var re=ce=>{var ue=ci(),ve=f(ue);F(ye=>K(ve,`[${ye??""}]`),[()=>s(H).report.map(ye=>"0x"+ye.toString(16).padStart(2,"0").toUpperCase()).join(" ")],Be),p(ce,ue)},de=ce=>{var ue=j(),ve=O(ue);{var ye=_e=>{var ge=ui(),fe=f(ge);F(Te=>K(fe,`[${Te??""}]`),[()=>s(H).report.map(Te=>"0x"+Te.toString(16).padStart(2,"0").toUpperCase()).join(" ")],Be),p(_e,ge)},xe=_e=>{var ge=j(),fe=O(ge);{var Te=je=>{var Oe=di(),dt=f(Oe);F(()=>K(dt,`${s(H).ms??""}ms`)),p(je,Oe)},Le=je=>{var Oe=j(),dt=O(Oe);{var cr=rt=>{var nt=vi(),Mt=f(nt);F(()=>K(Mt,`"${s(H).text??""}"`)),p(rt,nt)},Ft=rt=>{var nt=j(),Mt=O(nt);{var jt=At=>{var Vt=fi(),ur=f(Vt);F(()=>K(ur,`macro_id: ${s(H).macro_id??""}`)),p(At,Vt)};L(Mt,At=>{s(H).type==="execute_macro"&&At(jt)},!0)}p(rt,nt)};L(dt,rt=>{s(H).type==="type_text"?rt(cr):rt(Ft,!1)},!0)}p(je,Oe)};L(fe,je=>{s(H).type==="delay"?je(Te):je(Le,!1)},!0)}p(_e,ge)};L(ve,_e=>{s(H).type==="consumer_press"?_e(ye):_e(xe,!1)},!0)}p(ce,ue)};L(te,ce=>{s(H).type==="key_press"||s(H).type==="key_down"?ce(re):ce(de,!1)})}var G=h(ee,2);F(()=>K(le,s(H).type)),W("click",G,()=>g(X)),p(P,oe)}),p(D,Z)};L(Q,D=>{r().length>0&&D(se)})}F(()=>B.disabled=s(n)==="type_text"&&!s(d)||s(n)==="execute_macro"&&!s(u)),$a($,()=>s(n),D=>m(n,D)),W("click",B,v),p(e,z),Re()}var hi=S('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"><strong>Error:</strong> <button class="float-right font-bold">×</button></div>'),yi=S('<div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4"><strong>Notice:</strong> Not connected to the device. Macro execution will not work until connection is established. <button class="ml-2 px-2 py-1 bg-yellow-500 text-white rounded text-xs hover:bg-yellow-600">Reconnect</button></div>'),bi=S('<div class="flex justify-center py-8"><div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"></div></div>'),wi=S('<div class="bg-white shadow rounded-lg p-6"><h3 class="text-lg font-medium mb-4"> </h3> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="macro-id">ID</label> <input id="macro-id" type="text" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Unique identifier (no spaces, lowercase)"></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="macro-name">Name</label> <input id="macro-name" type="text" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Display name"></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1" for="macro-description">Description (optional)</label> <textarea id="macro-description" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Description of what this macro does" rows="2"></textarea></div> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">Commands</label> <!></div> <div class="flex justify-end gap-3 mt-6"><button class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">Cancel</button> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300"> </button></div></div>'),xi=S('<div class="bg-gray-100 rounded-lg p-8 text-center"><p class="text-gray-500">No macros defined yet.</p> <button class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Create Your First Macro</button></div>'),ki=S('<p class="text-sm text-gray-600 mt-1"> </p>'),$i=S('<div class="bg-white shadow rounded-lg overflow-hidden"><div class="p-4"><div class="flex justify-between items-start"><h3 class="text-lg font-medium"> </h3> <div class="flex space-x-2"><button class="text-blue-600 hover:text-blue-800" title="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path></svg></button> <button class="text-red-600 hover:text-red-800" title="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></button></div></div> <!> <p class="text-xs text-gray-500 mt-2"> </p> <p class="text-xs text-gray-500 mt-1"> </p></div> <div class="bg-gray-50 px-4 py-3 border-t flex justify-between"><button class="flex-1 bg-green-500 text-white px-2 py-2 rounded-l hover:bg-green-600 flex justify-center items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Execute</button> <button class="flex-1 bg-indigo-500 text-white px-2 py-2 rounded-r hover:bg-indigo-600 flex justify-center items-center ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path></svg> Assign</button></div></div>'),Si=S('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),Ei=S('<div class="flex justify-between mb-6"><div class="flex items-center"><div></div> <span class="text-sm text-gray-600"> </span></div> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Create Macro</button></div> <!>',1),Ci=S('<button class="p-4 bg-gray-100 hover:bg-blue-100 border border-gray-300 rounded text-center"></button>'),Mi=S(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 max-w-md w-full"><h3 class="text-lg font-medium mb-4"> </h3> <p class="text-sm text-gray-600 mb-4">Select a button to assign this macro to. This will update the button's configuration.</p> <div class="grid grid-cols-3 gap-2 mb-4"></div> <div class="flex justify-end"><button class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">Cancel</button></div></div></div>`),Ai=S('<div class="macros-page p-4"><h2 class="text-2xl font-bold mb-4">Macros</h2> <!> <!> <!></div> <!>',1);function zi(e,t){Ne(t,!1);let r=U([]),o=U(!0),n=U(null),a=null,i=U(!1),l=U(!1),d=U(!1),u=U(!1),v=U(null),g=U(""),c=U(""),y=U(""),_=U([]);const k=Se.subscribe(w=>{m(l,w.connected)});gt(async()=>{try{m(o,!0),m(r,await it.fetchAll()),m(o,!1)}catch(w){m(n,w.message||"Failed to load macros"),m(o,!1)}return()=>{k()}});function C(w){a=w,m(g,w.id),m(c,w.name),m(y,w.description||""),m(_,[...w.commands||[]]),m(i,!0),m(d,!1)}function N(){a=null,m(g,""),m(c,""),m(y,""),m(_,[]),m(i,!0),m(d,!0)}function z(){m(i,!1),m(d,!1),a=null}async function b(w){try{await it.executeMacro(w.id)}catch(P){m(n,P.message||"Failed to execute macro")}}async function $(w){if(confirm(`Are you sure you want to delete the macro "${w.name}"?`))try{await it.deleteMacro(w.id),m(r,s(r).filter(P=>P.id!==w.id))}catch(P){m(n,P.message||"Failed to delete macro")}}async function x(){const w={id:s(g),name:s(c),description:s(y),commands:s(_)};try{if(s(d)){const P=await it.createMacro(w);m(r,[...s(r),P])}else{const P=await it.updateMacro(s(g),w);m(r,s(r).map(H=>H.id===s(g)?P:H))}m(i,!1),m(d,!1),a=null}catch(P){m(n,P.message||"Failed to save macro")}}function T(w){m(_,w.detail.commands)}function V(w){m(v,w),m(u,!0)}function R(){m(u,!1),m(v,null)}async function A(w){if(s(v))try{await Se.assignMacroToButton(s(v).id,w),R()}catch(P){m(n,P.message||"Failed to assign macro to button")}}Fe();var M=Ai(),I=O(M),E=h(f(I),2);{var q=w=>{var P=hi(),H=h(f(P)),X=h(H);F(()=>K(H,` ${s(n)??""} `)),W("click",X,()=>m(n,null)),p(w,P)};L(E,w=>{s(n)&&w(q)})}var J=h(E,2);{var Y=w=>{var P=yi(),H=h(f(P),2);W("click",H,()=>Se.connect()),p(w,P)};L(J,w=>{s(l)||w(Y)})}var B=h(J,2);{var Q=w=>{var P=bi();p(w,P)},se=w=>{var P=j(),H=O(P);{var X=ee=>{var pe=wi(),le=f(pe),te=f(le),re=h(le,2),de=h(f(re),2),G=h(re,2),ce=h(f(G),2),ue=h(G,2),ve=h(f(ue),2),ye=h(ue,2),xe=h(f(ye),2);mi(xe,{get commands(){return s(_)},$$events:{update:T}});var _e=h(ye,2),ge=f(_e),fe=h(ge,2),Te=f(fe);F(()=>{K(te,s(d)?"Create New Macro":"Edit Macro"),de.disabled=!s(d),fe.disabled=!s(g)||!s(c)||s(_).length===0,K(Te,s(d)?"Create":"Save")}),ft(de,()=>s(g),Le=>m(g,Le)),ft(ce,()=>s(c),Le=>m(c,Le)),ft(ve,()=>s(y),Le=>m(y,Le)),W("click",ge,z),W("click",fe,x),p(ee,pe)},oe=ee=>{var pe=Ei(),le=O(pe),te=f(le),re=f(te),de=h(re,2),G=f(de),ce=h(te,2),ue=h(le,2);{var ve=xe=>{var _e=xi(),ge=h(f(_e),2);W("click",ge,N),p(xe,_e)},ye=xe=>{var _e=Si();$e(_e,5,()=>s(r),ke,(ge,fe)=>{var Te=$i(),Le=f(Te),je=f(Le),Oe=f(je),dt=f(Oe),cr=h(Oe,2),Ft=f(cr),rt=h(Ft,2),nt=h(je,2);{var Mt=vr=>{var jr=ki(),ro=f(jr);F(()=>K(ro,s(fe).description)),p(vr,jr)};L(nt,vr=>{s(fe).description&&vr(Mt)})}var jt=h(nt,2),At=f(jt),Vt=h(jt,2),ur=f(Vt),to=h(Le,2),dr=f(to),Fr=h(dr,2);F(()=>{K(dt,s(fe).name),K(At,`ID: ${s(fe).id??""}`),K(ur,`${(s(fe).commands||[]).length??""} commands`),dr.disabled=!s(l),Fr.disabled=!s(l)}),W("click",Ft,()=>C(s(fe))),W("click",rt,()=>$(s(fe))),W("click",dr,()=>b(s(fe))),W("click",Fr,()=>V(s(fe))),p(ge,Te)}),p(xe,_e)};L(ue,xe=>{s(r).length===0?xe(ve):xe(ye,!1)})}F(()=>{ze(re,`w-3 h-3 rounded-full mr-2 ${s(l)?"bg-green-500":"bg-red-500"}`),K(G,`WebSocket: ${(s(l)?"Connected":"Disconnected")??""}`)}),W("click",ce,N),p(ee,pe)};L(H,ee=>{s(i)?ee(X):ee(oe,!1)},!0)}p(w,P)};L(B,w=>{s(o)?w(Q):w(se,!1)})}var D=h(I,2);{var Z=w=>{var P=Mi(),H=f(P),X=f(H),oe=f(X),ee=h(X,4);$e(ee,4,()=>Array(9),ke,(te,re,de)=>{var G=Ci();G.textContent=`Button ${de+1}`,W("click",G,()=>A(`button-0-${de}`)),p(te,G)});var pe=h(ee,2),le=f(pe);F(()=>K(oe,`Assign "${s(v).name??""}" to Button`)),W("click",le,R),p(w,P)};L(D,w=>{s(u)&&w(Z)})}p(e,M),Re()}var Ti=S('<span class="text-sm"> </span>'),Pi=S('<button class="reconnect-btn svelte-unnjon" aria-label="Reconnect to Macropad" title="Reconnect to Macropad"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h-6"></path><path d="M3 12a9 9 0 0 1 15-6.7l3-3"></path><path d="M3 22v-6h6"></path><path d="M21 12a9 9 0 0 1-15 6.7l-3 3"></path></svg></button>'),Ni=S("<div><div></div> <!> <!></div>");function Ri(e,t){Ne(t,!1);let r=Ee(t,"showLabel",8,!0),o=Ee(t,"position",8,"top-right"),n=U(!1),a=U(!1);const i=Se.subscribe(_=>{m(n,_.connected)});gt(()=>{s(n)||Se.connect();const _=setTimeout(()=>{s(n)||(console.log("Connection check - still not connected, trying again"),Se.connect())},1e3);return()=>{clearTimeout(_),i()}});function l(){s(a)||(m(a,!0),Se.disconnect(),setTimeout(()=>{Se.connect(),m(a,!1)},300))}Fe();var d=Ni(),u=f(d),v=h(u,2);{var g=_=>{var k=Ti(),C=f(k);F(()=>K(C,s(n)?"Connected":"Disconnected")),p(_,k)};L(v,_=>{r()&&_(g)})}var c=h(v,2);{var y=_=>{var k=Pi(),C=f(k);F(()=>{k.disabled=s(a),xa(C,`${`reconnect-icon ${s(a)?"animate-spin":""}`??""} svelte-unnjon`)}),W("click",k,l),p(_,k)};L(c,_=>{s(n)||_(y)})}F(()=>{ze(d,`${`connection-status ${o()} flex items-center gap-2`??""} svelte-unnjon`),ze(u,`${`w-3 h-3 rounded-full ${s(n)?"bg-green-500":"bg-red-500"}`??""} svelte-unnjon`)}),p(e,d),Re()}var Di=S('<div class="flex justify-center items-center p-8 svelte-1ps1vr7"><div class="loading-spinner svelte-1ps1vr7"></div> <p class="ml-2 svelte-1ps1vr7">Loading configuration data...</p></div> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4 svelte-1ps1vr7">Load Sample Data (Demo)</button>',1),Ii=S('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded svelte-1ps1vr7"><p class="svelte-1ps1vr7"> </p> <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4 svelte-1ps1vr7">Load Sample Data (Demo)</button></div>'),Bi=S('<pre class="json-display svelte-1ps1vr7"> </pre>'),Li=S('<pre class="json-display svelte-1ps1vr7"> </pre>'),Oi=S('<pre class="json-display svelte-1ps1vr7"> </pre>'),qi=S('<p class="text-gray-500 italic svelte-1ps1vr7">No data available for this configuration type</p>'),Wi=S('<div class="flex border-b mb-4 svelte-1ps1vr7"><button>Modules</button> <button>Macros</button> <button>System</button></div> <div class="config-content-container svelte-1ps1vr7"><!></div>',1),Fi=S('<div class="raw-config-container svelte-1ps1vr7"><h2 class="text-2xl font-bold mb-4 svelte-1ps1vr7">Raw Configuration</h2> <div class="bg-white rounded-lg shadow p-4 mb-6 svelte-1ps1vr7"><div class="flex justify-between items-center mb-4 svelte-1ps1vr7"><p class="text-gray-600 svelte-1ps1vr7">This page displays the raw JSON configuration files stored in the ESP32 memory.</p> <button class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 text-sm svelte-1ps1vr7"> </button></div> <!></div></div>');function ji(e,t){Ne(t,!1);let r=U({modules:null,macros:null,system:null}),o=U("modules"),n=U(!0),a=U(null),i=null,l=!1;function d(b){try{return JSON.stringify(b,null,2)}catch{return"Error formatting JSON"}}gt(async()=>{try{m(n,!0),l=!1,i=setTimeout(()=>{l||(console.log("No data received within timeout, using example data"),m(n,!1),m(a,"No response from device. Using sample data."),u())},1e4);const b=Se.subscribe($=>{if($.events&&$.events.length>0){const x=$.events[$.events.length-1];x.type==="config_data"?(l=!0,x.configType==="modules"?Ie(r,s(r).modules=x.data):x.configType==="macros"?Ie(r,s(r).macros=x.data):x.configType==="system"&&Ie(r,s(r).system=x.data),m(n,!1),m(a,null)):x.type==="all_configs"&&(l=!0,x.modules&&Ie(r,s(r).modules=x.modules),x.macros&&Ie(r,s(r).macros=x.macros),x.system&&Ie(r,s(r).system=x.system),m(n,!1),m(a,null))}$.connected&&!l&&setTimeout(()=>{console.log("Requesting configurations via WebSocket"),Se.sendMessage({type:"get_all_configs"}).catch(x=>{console.error("Error requesting configs:",x)})},500)});return()=>{b(),i&&clearTimeout(i)}}catch(b){console.error("Failed to load configurations:",b),m(a,b.message||"Failed to load configurations"),m(n,!1)}});function u(){m(r,{modules:[{id:"A1:B2:C3:D4:E5:F6",name:"Main Module",gridSize:{rows:5,columns:5},components:[{id:"display-1",type:"display",position:{row:0,column:0},keyBinding:null},{id:"btn-1",type:"button",position:{row:1,column:0},keyBinding:"macro:123"}]}],macros:[{id:"123",name:"Test Macro",commands:[{type:"keypress",key:"a"}]}],system:{version:"1.0.0",deviceName:"Modular Macropad",lastSync:new Date().toISOString()}}),m(n,!1)}function v(){m(n,!0),l=!1,m(a,null),i&&clearTimeout(i),i=setTimeout(()=>{l||(console.log("No data received within timeout on refresh, using example data"),m(n,!1),m(a,"No response from device. Using sample data."),u())},1e4),Se.sendMessage({type:"get_all_configs"}).catch(b=>{console.error("Error requesting configs on refresh:",b)})}Fe();var g=Fi(),c=h(f(g),2),y=f(c),_=h(f(y),2),k=f(_),C=h(y,2);{var N=b=>{var $=Di(),x=h(O($),2);W("click",x,u),p(b,$)},z=b=>{var $=j(),x=O($);{var T=R=>{var A=Ii(),M=f(A),I=f(M),E=h(M,2);F(()=>K(I,s(a))),W("click",E,u),p(R,A)},V=R=>{var A=Wi(),M=O(A),I=f(M),E=h(I,2),q=h(E,2),J=h(M,2),Y=f(J);{var B=se=>{var D=Bi(),Z=f(D);F(w=>K(Z,w),[()=>d(s(r).modules)],Be),p(se,D)},Q=se=>{var D=j(),Z=O(D);{var w=H=>{var X=Li(),oe=f(X);F(ee=>K(oe,ee),[()=>d(s(r).macros)],Be),p(H,X)},P=H=>{var X=j(),oe=O(X);{var ee=le=>{var te=Oi(),re=f(te);F(de=>K(re,de),[()=>d(s(r).system)],Be),p(le,te)},pe=le=>{var te=qi();p(le,te)};L(oe,le=>{s(o)==="system"&&s(r).system?le(ee):le(pe,!1)},!0)}p(H,X)};L(Z,H=>{s(o)==="macros"&&s(r).macros?H(w):H(P,!1)},!0)}p(se,D)};L(Y,se=>{s(o)==="modules"&&s(r).modules?se(B):se(Q,!1)})}F(()=>{ze(I,`${`px-4 py-2 mr-2 ${s(o)==="modules"?"border-b-2 border-blue-500 font-semibold":"text-gray-600"}`??""} svelte-1ps1vr7`),ze(E,`${`px-4 py-2 mr-2 ${s(o)==="macros"?"border-b-2 border-blue-500 font-semibold":"text-gray-600"}`??""} svelte-1ps1vr7`),ze(q,`${`px-4 py-2 ${s(o)==="system"?"border-b-2 border-blue-500 font-semibold":"text-gray-600"}`??""} svelte-1ps1vr7`)}),W("click",I,()=>m(o,"modules")),W("click",E,()=>m(o,"macros")),W("click",q,()=>m(o,"system")),p(R,A)};L(x,R=>{s(a)?R(T):R(V,!1)},!0)}p(b,$)};L(C,b=>{s(n)?b(N):b(z,!1)})}F(()=>{_.disabled=s(n),K(k,s(n)?"Loading...":"Refresh")}),W("click",_,v),p(e,g),Re()}var Vi=S('<main class="min-h-screen flex flex-col bg-gray-50"><!> <div class="navbar mb-2 p-2 bg-primary text-primary-content rounded-lg shadow max-w-6xl mx-auto"><div class="flex flex-col w-full items-center justify-center gap-2"><div class="text-center mb-2"><h1 class="text-xl font-bold">Macropad Control Panel</h1></div> <div class="tabs tabs-boxed bg-primary-focus"><button data-tab="macropad"><!> Macropad</button> <button data-tab="macros"><!> Macros</button> <button data-tab="lighting"><!> Lighting</button> <button data-tab="settings"><!> Settings</button> <button data-tab="raw-config"><!> Raw Config</button></div></div></div> <div class="main-content mb-8 max-w-6xl mx-auto w-full"><!></div></main>');function Ui(e,t){Ne(t,!1);let r=U("macropad");gt(()=>(Se.connect(),()=>{Se.disconnect()})),Fe();var o=Vi(),n=f(o);Ri(n,{position:"top-right"});var a=h(n,2),i=f(a),l=h(f(i),2),d=f(l),u=f(d);qa(u,{class:"inline-block w-5 h-5 mr-1"});var v=h(d,2),g=f(v);Wa(g,{class:"inline-block w-5 h-5 mr-1"});var c=h(v,2),y=f(c);La(y,{class:"inline-block w-5 h-5 mr-1"});var _=h(c,2),k=f(_);Va(k,{class:"inline-block w-5 h-5 mr-1"});var C=h(_,2),N=f(C);Oa(N,{class:"inline-block w-5 h-5 mr-1"});var z=h(a,2),b=f(z);{var $=T=>{Gs(T,{})},x=T=>{var V=j(),R=O(V);{var A=I=>{zi(I,{})},M=I=>{var E=j(),q=O(E);{var J=B=>{Xs(B)},Y=B=>{var Q=j(),se=O(Q);{var D=w=>{},Z=w=>{var P=j(),H=O(P);{var X=oe=>{ji(oe,{})};L(H,oe=>{s(r)==="raw-config"&&oe(X)},!0)}p(w,P)};L(se,w=>{s(r)==="settings"?w(D):w(Z,!1)},!0)}p(B,Q)};L(q,B=>{s(r)==="lighting"?B(J):B(Y,!1)},!0)}p(I,E)};L(R,I=>{s(r)==="macros"?I(A):I(M,!1)},!0)}p(T,V)};L(b,T=>{s(r)==="macropad"?T($):T(x,!1)})}F(()=>{ze(d,`tab transition-colors duration-200 ${s(r)==="macropad"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),ze(v,`tab transition-colors duration-200 ${s(r)==="macros"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),ze(c,`tab transition-colors duration-200 ${s(r)==="lighting"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),ze(_,`tab transition-colors duration-200 ${s(r)==="settings"?"tab-active bg-primary-content text-primary":"text-primary-content"}`),ze(C,`tab transition-colors duration-200 ${s(r)==="raw-config"?"tab-active bg-primary-content text-primary":"text-primary-content"}`)}),W("click",d,()=>m(r,"macropad")),W("click",v,()=>m(r,"macros")),W("click",c,()=>m(r,"lighting")),W("click",_,()=>m(r,"settings")),W("click",C,()=>m(r,"raw-config")),p(e,o),Re()}va(Ui,{target:document.getElementById("app")});
